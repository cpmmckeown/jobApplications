!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require
if(!u&&a)return a(o,!0)
if(i)return i(o,!0)
var f=new Error("Cannot find module '"+o+"'")
throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}}
t[o][0].call(l.exports,function(e){var n=t[o][1][e]
return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o])
return s}({1:[function(require,module,exports){function isIndex(value,length){return value="number"==typeof value||reIsUint.test(value)?+value:-1,length=null==length?MAX_SAFE_INTEGER:length,value>-1&&value%1==0&&length>value}function assignValue(object,key,value){var objValue=object[key];(!eq(objValue,value)||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)||void 0===value&&!(key in object))&&(object[key]=value)}function baseProperty(key){return function(object){return null==object?void 0:object[key]}}function copyObject(source,props,object){return copyObjectWith(source,props,object)}function copyObjectWith(source,props,object,customizer){object||(object={})
for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):source[key]
assignValue(object,key,newValue)}return object}function createAssigner(assigner){return rest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:void 0,guard=length>2?sources[2]:void 0
for(customizer="function"==typeof customizer?(length--,customizer):void 0,guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=3>length?void 0:customizer,length=1),object=Object(object);++index<length;){var source=sources[index]
source&&assigner(object,source,index,customizer)}return object})}function isIterateeCall(value,index,object){if(!isObject(object))return!1
var type=typeof index
return("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)?eq(object[index],value):!1}function eq(value,other){return value===other||value!==value&&other!==other}function isArrayLike(value){return null!=value&&!("function"==typeof value&&isFunction(value))&&isLength(getLength(value))}function isFunction(value){var tag=isObject(value)?objectToString.call(value):""
return tag==funcTag||tag==genTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&MAX_SAFE_INTEGER>=value}function isObject(value){var type=typeof value
return!!value&&("object"==type||"function"==type)}var keys=require("lodash.keys"),rest=require("lodash.rest"),MAX_SAFE_INTEGER=9007199254740991,funcTag="[object Function]",genTag="[object GeneratorFunction]",reIsUint=/^(?:0|[1-9]\d*)$/,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,getLength=baseProperty("length"),assign=createAssigner(function(object,source){copyObject(source,keys(source),object)})
module.exports=assign},{"lodash.keys":2,"lodash.rest":3}],2:[function(require,module,exports){function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index)
return result}function isIndex(value,length){return value="number"==typeof value||reIsUint.test(value)?+value:-1,length=null==length?MAX_SAFE_INTEGER:length,value>-1&&value%1==0&&length>value}function baseHas(object,key){return hasOwnProperty.call(object,key)||"object"==typeof object&&key in object&&null===getPrototypeOf(object)}function baseKeys(object){return nativeKeys(Object(object))}function baseProperty(key){return function(object){return null==object?void 0:object[key]}}function indexKeys(object){var length=object?object.length:void 0
return isLength(length)&&(isArray(object)||isString(object)||isArguments(object))?baseTimes(length,String):null}function isPrototype(value){var Ctor=value&&value.constructor,proto="function"==typeof Ctor&&Ctor.prototype||objectProto
return value===proto}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}function isArrayLike(value){return null!=value&&!("function"==typeof value&&isFunction(value))&&isLength(getLength(value))}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isFunction(value){var tag=isObject(value)?objectToString.call(value):""
return tag==funcTag||tag==genTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&MAX_SAFE_INTEGER>=value}function isObject(value){var type=typeof value
return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isString(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&objectToString.call(value)==stringTag}function keys(object){var isProto=isPrototype(object)
if(!isProto&&!isArrayLike(object))return baseKeys(object)
var indexes=indexKeys(object),skipIndexes=!!indexes,result=indexes||[],length=result.length
for(var key in object)!baseHas(object,key)||skipIndexes&&("length"==key||isIndex(key,length))||isProto&&"constructor"==key||result.push(key)
return result}var MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",stringTag="[object String]",reIsUint=/^(?:0|[1-9]\d*)$/,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,getPrototypeOf=Object.getPrototypeOf,propertyIsEnumerable=objectProto.propertyIsEnumerable,nativeKeys=Object.keys,getLength=baseProperty("length"),isArray=Array.isArray
module.exports=keys},{}],3:[function(require,module,exports){function apply(func,thisArg,args){var length=args.length
switch(length){case 0:return func.call(thisArg)
case 1:return func.call(thisArg,args[0])
case 2:return func.call(thisArg,args[0],args[1])
case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function rest(func,start){if("function"!=typeof func)throw new TypeError(FUNC_ERROR_TEXT)
return start=nativeMax(void 0===start?func.length-1:toInteger(start),0),function(){for(var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);++index<length;)array[index]=args[start+index]
switch(start){case 0:return func.call(this,array)
case 1:return func.call(this,args[0],array)
case 2:return func.call(this,args[0],args[1],array)}var otherArgs=Array(start+1)
for(index=-1;++index<start;)otherArgs[index]=args[index]
return otherArgs[start]=array,apply(func,this,otherArgs)}}function isFunction(value){var tag=isObject(value)?objectToString.call(value):""
return tag==funcTag||tag==genTag}function isObject(value){var type=typeof value
return!!value&&("object"==type||"function"==type)}function toInteger(value){if(!value)return 0===value?value:0
if(value=toNumber(value),value===INFINITY||value===-INFINITY){var sign=0>value?-1:1
return sign*MAX_INTEGER}var remainder=value%1
return value===value?remainder?value-remainder:value:0}function toNumber(value){if(isObject(value)){var other=isFunction(value.valueOf)?value.valueOf():value
value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value
value=value.replace(reTrim,"")
var isBinary=reIsBinary.test(value)
return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}var FUNC_ERROR_TEXT="Expected a function",INFINITY=1/0,MAX_INTEGER=1.7976931348623157e308,NAN=NaN,funcTag="[object Function]",genTag="[object GeneratorFunction]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,objectProto=Object.prototype,objectToString=objectProto.toString,nativeMax=Math.max
module.exports=rest},{}],4:[function(require,module,exports){function apply(func,thisArg,args){var length=args.length
switch(length){case 0:return func.call(thisArg)
case 1:return func.call(thisArg,args[0])
case 2:return func.call(thisArg,args[0],args[1])
case 3:return func.call(thisArg,args[0],args[1],args[2])}return func.apply(thisArg,args)}function assignInDefaults(objValue,srcValue,key,object){return void 0===objValue||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)?srcValue:objValue}function eq(value,other){return value===other||value!==value&&other!==other}var assignInWith=require("lodash.assigninwith"),rest=require("lodash.rest"),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,defaults=rest(function(args){return args.push(void 0,assignInDefaults),apply(assignInWith,void 0,args)})
module.exports=defaults},{"lodash.assigninwith":5,"lodash.rest":8}],5:[function(require,module,exports){function isIndex(value,length){return value="number"==typeof value||reIsUint.test(value)?+value:-1,length=null==length?MAX_SAFE_INTEGER:length,value>-1&&value%1==0&&length>value}function assignValue(object,key,value){var objValue=object[key];(!eq(objValue,value)||eq(objValue,objectProto[key])&&!hasOwnProperty.call(object,key)||void 0===value&&!(key in object))&&(object[key]=value)}function baseProperty(key){return function(object){return null==object?void 0:object[key]}}function copyObjectWith(source,props,object,customizer){object||(object={})
for(var index=-1,length=props.length;++index<length;){var key=props[index],newValue=customizer?customizer(object[key],source[key],key,object,source):source[key]
assignValue(object,key,newValue)}return object}function createAssigner(assigner){return rest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:void 0,guard=length>2?sources[2]:void 0
for(customizer="function"==typeof customizer?(length--,customizer):void 0,guard&&isIterateeCall(sources[0],sources[1],guard)&&(customizer=3>length?void 0:customizer,length=1),object=Object(object);++index<length;){var source=sources[index]
source&&assigner(object,source,index,customizer)}return object})}function isIterateeCall(value,index,object){if(!isObject(object))return!1
var type=typeof index
return("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)?eq(object[index],value):!1}function eq(value,other){return value===other||value!==value&&other!==other}function isArrayLike(value){return null!=value&&!("function"==typeof value&&isFunction(value))&&isLength(getLength(value))}function isFunction(value){var tag=isObject(value)?objectToString.call(value):""
return tag==funcTag||tag==genTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&MAX_SAFE_INTEGER>=value}function isObject(value){var type=typeof value
return!!value&&("object"==type||"function"==type)}var keysIn=require("lodash.keysin"),rest=require("lodash.rest"),MAX_SAFE_INTEGER=9007199254740991,funcTag="[object Function]",genTag="[object GeneratorFunction]",reIsUint=/^(?:0|[1-9]\d*)$/,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,getLength=baseProperty("length"),assignInWith=createAssigner(function(object,source,srcIndex,customizer){copyObjectWith(source,keysIn(source),object,customizer)})
module.exports=assignInWith},{"lodash.keysin":6,"lodash.rest":8}],6:[function(require,module,exports){function baseTimes(n,iteratee){for(var index=-1,result=Array(n);++index<n;)result[index]=iteratee(index)
return result}function isIndex(value,length){return value="number"==typeof value||reIsUint.test(value)?+value:-1,length=null==length?MAX_SAFE_INTEGER:length,value>-1&&value%1==0&&length>value}function iteratorToArray(iterator){for(var data,result=[];!(data=iterator.next()).done;)result.push(data.value)
return result}function baseKeysIn(object){object=null==object?object:Object(object)
var result=[]
for(var key in object)result.push(key)
return result}function baseProperty(key){return function(object){return null==object?void 0:object[key]}}function indexKeys(object){var length=object?object.length:void 0
return isLength(length)&&(isArray(object)||isString(object)||isArguments(object))?baseTimes(length,String):null}function isPrototype(value){var Ctor=value&&value.constructor,proto="function"==typeof Ctor&&Ctor.prototype||objectProto
return value===proto}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}function isArrayLike(value){return null!=value&&!("function"==typeof value&&isFunction(value))&&isLength(getLength(value))}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isFunction(value){var tag=isObject(value)?objectToString.call(value):""
return tag==funcTag||tag==genTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&MAX_SAFE_INTEGER>=value}function isObject(value){var type=typeof value
return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isString(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&objectToString.call(value)==stringTag}function keysIn(object){for(var index=-1,isProto=isPrototype(object),props=baseKeysIn(object),propsLength=props.length,indexes=indexKeys(object),skipIndexes=!!indexes,result=indexes||[],length=result.length;++index<propsLength;){var key=props[index]
skipIndexes&&("length"==key||isIndex(key,length))||"constructor"==key&&(isProto||!hasOwnProperty.call(object,key))||result.push(key)}return result}var root=require("lodash._root"),MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",stringTag="[object String]",reIsUint=/^(?:0|[1-9]\d*)$/,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,Reflect=root.Reflect,enumerate=Reflect?Reflect.enumerate:void 0,propertyIsEnumerable=objectProto.propertyIsEnumerable
enumerate&&!propertyIsEnumerable.call({valueOf:1},"valueOf")&&(baseKeysIn=function(object){return iteratorToArray(enumerate(object))})
var getLength=baseProperty("length"),isArray=Array.isArray
module.exports=keysIn},{"lodash._root":7}],7:[function(require,module,exports){(function(global){function checkGlobal(value){return value&&value.Object===Object?value:null}var objectTypes={"function":!0,object:!0},freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType?exports:null,freeModule=objectTypes[typeof module]&&module&&!module.nodeType?module:null,freeGlobal=checkGlobal(freeExports&&freeModule&&"object"==typeof global&&global),freeSelf=checkGlobal(objectTypes[typeof self]&&self),freeWindow=checkGlobal(objectTypes[typeof window]&&window),thisGlobal=checkGlobal(objectTypes[typeof this]&&this),root=freeGlobal||freeWindow!==(thisGlobal&&thisGlobal.window)&&freeWindow||freeSelf||thisGlobal||Function("return this")()
module.exports=root}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(require,module,exports){arguments[4][3][0].apply(exports,arguments)},{dup:3}],9:[function(require,module,exports){function baseClamp(number,lower,upper){return number===number&&(void 0!==upper&&(number=upper>=number?number:upper),void 0!==lower&&(number=number>=lower?number:lower)),number}function isFunction(value){var tag=isObject(value)?objectToString.call(value):""
return tag==funcTag||tag==genTag}function isObject(value){var type=typeof value
return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toInteger(value){if(!value)return 0===value?value:0
if(value=toNumber(value),value===INFINITY||value===-INFINITY){var sign=0>value?-1:1
return sign*MAX_INTEGER}var remainder=value%1
return value===value?remainder?value-remainder:value:0}function toNumber(value){if(isObject(value)){var other=isFunction(value.valueOf)?value.valueOf():value
value=isObject(other)?other+"":other}if("string"!=typeof value)return 0===value?value:+value
value=value.replace(reTrim,"")
var isBinary=reIsBinary.test(value)
return isBinary||reIsOctal.test(value)?freeParseInt(value.slice(2),isBinary?2:8):reIsBadHex.test(value)?NAN:+value}function toString(value){if("string"==typeof value)return value
if(null==value)return""
if(isSymbol(value))return Symbol?symbolToString.call(value):""
var result=value+""
return"0"==result&&1/value==-INFINITY?"-0":result}function endsWith(string,target,position){string=toString(string),target="string"==typeof target?target:target+""
var length=string.length
return position=void 0===position?length:baseClamp(toInteger(position),0,length),position-=target.length,position>=0&&string.indexOf(target,position)==position}var root=require("lodash._root"),INFINITY=1/0,MAX_INTEGER=1.7976931348623157e308,NAN=NaN,funcTag="[object Function]",genTag="[object GeneratorFunction]",symbolTag="[object Symbol]",reTrim=/^\s+|\s+$/g,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt,objectProto=Object.prototype,objectToString=objectProto.toString,Symbol=root.Symbol,symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=Symbol?symbolProto.toString:void 0
module.exports=endsWith},{"lodash._root":10}],10:[function(require,module,exports){arguments[4][7][0].apply(exports,arguments)},{dup:7}],11:[function(require,module,exports){function baseGet(object,path){path=isKey(path,object)?[path+""]:baseToPath(path)
for(var index=0,length=path.length;null!=object&&length>index;)object=object[path[index++]]
return index&&index==length?object:void 0}function baseIteratee(value){var type=typeof value
return"function"==type?value:null==value?identity:"object"==type?isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value)}function baseMatches(source){var matchData=getMatchData(source)
if(1==matchData.length&&matchData[0][2]){var key=matchData[0][0],value=matchData[0][1]
return function(object){return null==object?!1:object[key]===value&&(void 0!==value||key in Object(object))}}return function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseMatchesProperty(path,srcValue){return function(object){var objValue=get(object,path)
return void 0===objValue&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,void 0,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG)}}function baseProperty(key){return function(object){return null==object?void 0:object[key]}}function basePropertyDeep(path){return function(object){return baseGet(object,path)}}function baseToPath(value){return isArray(value)?value:stringToPath(value)}function getMatchData(object){for(var result=toPairs(object),length=result.length;length--;)result[length][2]=isStrictComparable(result[length][1])
return result}function isKey(value,object){return"number"==typeof value?!0:!isArray(value)&&(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}function isStrictComparable(value){return value===value&&!isObject(value)}function stringToPath(string){var result=[]
return toString(string).replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)}),result}function filter(collection,predicate){var func=isArray(collection)?arrayFilter:baseFilter
return func(collection,baseIteratee(predicate,3))}function isObject(value){var type=typeof value
return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toString(value){if("string"==typeof value)return value
if(null==value)return""
if(isSymbol(value))return Symbol?symbolToString.call(value):""
var result=value+""
return"0"==result&&1/value==-INFINITY?"-0":result}function identity(value){return value}function property(path){return isKey(path)?baseProperty(path):basePropertyDeep(path)}var arrayFilter=require("lodash._arrayfilter"),baseFilter=require("lodash._basefilter"),baseIsEqual=require("lodash._baseisequal"),baseIsMatch=require("lodash._baseismatch"),get=require("lodash.get"),hasIn=require("lodash.hasin"),root=require("lodash._root"),toPairs=require("lodash.topairs"),UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2,INFINITY=1/0,symbolTag="[object Symbol]",reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,reEscapeChar=/\\(\\)?/g,objectProto=Object.prototype,objectToString=objectProto.toString,Symbol=root.Symbol,symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=Symbol?symbolProto.toString:void 0,isArray=Array.isArray
module.exports=filter},{"lodash._arrayfilter":12,"lodash._basefilter":13,"lodash._baseisequal":16,"lodash._baseismatch":20,"lodash._root":23,"lodash.get":24,"lodash.hasin":25,"lodash.topairs":27}],12:[function(require,module,exports){function arrayFilter(array,predicate){for(var index=-1,length=array.length,resIndex=-1,result=[];++index<length;){var value=array[index]
predicate(value,index,array)&&(result[++resIndex]=value)}return result}module.exports=arrayFilter},{}],13:[function(require,module,exports){function baseFilter(collection,predicate){var result=[]
return baseEach(collection,function(value,index,collection){predicate(value,index,collection)&&result.push(value)}),result}var baseEach=require("lodash._baseeach")
module.exports=baseFilter},{"lodash._baseeach":14}],14:[function(require,module,exports){function baseForOwn(object,iteratee){return object&&baseFor(object,iteratee,keys)}function baseProperty(key){return function(object){return null==object?void 0:object[key]}}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){if(null==collection)return collection
if(!isArrayLike(collection))return eachFunc(collection,iteratee)
for(var length=collection.length,index=fromRight?length:-1,iterable=Object(collection);(fromRight?index--:++index<length)&&iteratee(iterable[index],index,iterable)!==!1;);return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index]
if(iteratee(iterable[key],key,iterable)===!1)break}return object}}function isArrayLike(value){return null!=value&&!("function"==typeof value&&isFunction(value))&&isLength(getLength(value))}function isFunction(value){var tag=isObject(value)?objectToString.call(value):""
return tag==funcTag||tag==genTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&MAX_SAFE_INTEGER>=value}function isObject(value){var type=typeof value
return!!value&&("object"==type||"function"==type)}var keys=require("lodash.keys"),MAX_SAFE_INTEGER=9007199254740991,funcTag="[object Function]",genTag="[object GeneratorFunction]",objectProto=Object.prototype,objectToString=objectProto.toString,baseEach=createBaseEach(baseForOwn),baseFor=createBaseFor(),getLength=baseProperty("length")
module.exports=baseEach},{"lodash.keys":15}],15:[function(require,module,exports){arguments[4][2][0].apply(exports,arguments)},{dup:2}],16:[function(require,module,exports){function arraySome(array,predicate){for(var index=-1,length=array.length;++index<length;)if(predicate(array[index],index,array))return!0
return!1}function isHostObject(value){var result=!1
if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}function mapToArray(map){var index=-1,result=Array(map.size)
return map.forEach(function(value,key){result[++index]=[key,value]}),result}function setToArray(set){var index=-1,result=Array(set.size)
return set.forEach(function(value){result[++index]=value}),result}function baseHas(object,key){return hasOwnProperty.call(object,key)||"object"==typeof object&&key in object&&null===getPrototypeOf(object)}function baseIsEqual(value,other,customizer,bitmask,stack){return value===other?!0:null==value||null==other||!isObject(value)&&!isObjectLike(other)?value!==value&&other!==other:baseIsEqualDeep(value,other,baseIsEqual,customizer,bitmask,stack)}function baseIsEqualDeep(object,other,equalFunc,customizer,bitmask,stack){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag
objIsArr||(objTag=getTag(object),objTag==argsTag?objTag=objectTag:objTag!=objectTag&&(objIsArr=isTypedArray(object))),othIsArr||(othTag=getTag(other),othTag==argsTag?othTag=objectTag:othTag!=objectTag&&(othIsArr=isTypedArray(other)))
var objIsObj=objTag==objectTag&&!isHostObject(object),othIsObj=othTag==objectTag&&!isHostObject(other),isSameTag=objTag==othTag
if(isSameTag&&!objIsArr&&!objIsObj)return equalByTag(object,other,objTag,equalFunc,customizer,bitmask)
var isPartial=bitmask&PARTIAL_COMPARE_FLAG
if(!isPartial){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othIsWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__")
if(objIsWrapped||othIsWrapped)return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,customizer,bitmask,stack)}return isSameTag?(stack||(stack=new Stack),(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,customizer,bitmask,stack)):!1}function equalArrays(array,other,equalFunc,customizer,bitmask,stack){var index=-1,isPartial=bitmask&PARTIAL_COMPARE_FLAG,isUnordered=bitmask&UNORDERED_COMPARE_FLAG,arrLength=array.length,othLength=other.length
if(arrLength!=othLength&&!(isPartial&&othLength>arrLength))return!1
var stacked=stack.get(array)
if(stacked)return stacked==other
var result=!0
for(stack.set(array,other);++index<arrLength;){var arrValue=array[index],othValue=other[index]
if(customizer)var compared=isPartial?customizer(othValue,arrValue,index,other,array,stack):customizer(arrValue,othValue,index,array,other,stack)
if(void 0!==compared){if(compared)continue
result=!1
break}if(isUnordered){if(!arraySome(other,function(othValue){return arrValue===othValue||equalFunc(arrValue,othValue,customizer,bitmask,stack)})){result=!1
break}}else if(arrValue!==othValue&&!equalFunc(arrValue,othValue,customizer,bitmask,stack)){result=!1
break}}return stack["delete"](array),result}function equalByTag(object,other,tag,equalFunc,customizer,bitmask){switch(tag){case arrayBufferTag:return object.byteLength==other.byteLength&&equalFunc(new Uint8Array(object),new Uint8Array(other))?!0:!1
case boolTag:case dateTag:return+object==+other
case errorTag:return object.name==other.name&&object.message==other.message
case numberTag:return object!=+object?other!=+other:object==+other
case regexpTag:case stringTag:return object==other+""
case mapTag:var convert=mapToArray
case setTag:var isPartial=bitmask&PARTIAL_COMPARE_FLAG
return convert||(convert=setToArray),(isPartial||object.size==other.size)&&equalFunc(convert(object),convert(other),customizer,bitmask|UNORDERED_COMPARE_FLAG)
case symbolTag:return!!Symbol&&symbolValueOf.call(object)==symbolValueOf.call(other)}return!1}function equalObjects(object,other,equalFunc,customizer,bitmask,stack){var isPartial=bitmask&PARTIAL_COMPARE_FLAG,objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length
if(objLength!=othLength&&!isPartial)return!1
for(var index=objLength;index--;){var key=objProps[index]
if(!(isPartial?key in other:baseHas(other,key)))return!1}var stacked=stack.get(object)
if(stacked)return stacked==other
var result=!0
stack.set(object,other)
for(var skipCtor=isPartial;++index<objLength;){key=objProps[index]
var objValue=object[key],othValue=other[key]
if(customizer)var compared=isPartial?customizer(othValue,objValue,key,other,object,stack):customizer(objValue,othValue,key,object,other,stack)
if(!(void 0===compared?objValue===othValue||equalFunc(objValue,othValue,customizer,bitmask,stack):compared)){result=!1
break}skipCtor||(skipCtor="constructor"==key)}if(result&&!skipCtor){var objCtor=object.constructor,othCtor=other.constructor
objCtor!=othCtor&&"constructor"in object&&"constructor"in other&&!("function"==typeof objCtor&&objCtor instanceof objCtor&&"function"==typeof othCtor&&othCtor instanceof othCtor)&&(result=!1)}return stack["delete"](object),result}function getNative(object,key){var value=null==object?void 0:object[key]
return isNative(value)?value:void 0}function getTag(value){return objectToString.call(value)}function isFunction(value){var tag=isObject(value)?objectToString.call(value):""
return tag==funcTag||tag==genTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&MAX_SAFE_INTEGER>=value}function isObject(value){var type=typeof value
return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isNative(value){return null==value?!1:isFunction(value)?reIsNative.test(funcToString.call(value)):isObjectLike(value)&&(isHostObject(value)?reIsNative:reIsHostCtor).test(value)}function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objectToString.call(value)]}var Stack=require("lodash._stack"),keys=require("lodash.keys"),root=require("lodash._root"),UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,typedArrayTags={}
typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1
var objectProto=Object.prototype,funcToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Symbol=root.Symbol,Uint8Array=root.Uint8Array,getPrototypeOf=Object.getPrototypeOf,Map=getNative(root,"Map"),Set=getNative(root,"Set"),mapCtorString=Map?funcToString.call(Map):"",setCtorString=Set?funcToString.call(Set):"",symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=Symbol?symbolProto.valueOf:void 0;(Map&&getTag(new Map)!=mapTag||Set&&getTag(new Set)!=setTag)&&(getTag=function(value){var result=objectToString.call(value),Ctor=result==objectTag?value.constructor:null,ctorString="function"==typeof Ctor?funcToString.call(Ctor):""
if(ctorString){if(ctorString==mapCtorString)return mapTag
if(ctorString==setCtorString)return setTag}return result})
var isArray=Array.isArray
module.exports=baseIsEqual},{"lodash._root":23,"lodash._stack":17,"lodash.keys":19}],17:[function(require,module,exports){function Stack(values){var index=-1,length=values?values.length:0
for(this.clear();++index<length;){var entry=values[index]
this.set(entry[0],entry[1])}}function stackClear(){this.__data__={array:[],map:null}}function stackDelete(key){var data=this.__data__,array=data.array
return array?assocDelete(array,key):data.map["delete"](key)}function stackGet(key){var data=this.__data__,array=data.array
return array?assocGet(array,key):data.map.get(key)}function stackHas(key){var data=this.__data__,array=data.array
return array?assocHas(array,key):data.map.has(key)}function stackSet(key,value){var data=this.__data__,array=data.array
array&&(array.length<LARGE_ARRAY_SIZE-1?assocSet(array,key,value):(data.array=null,data.map=new MapCache(array)))
var map=data.map
return map&&map.set(key,value),this}function assocDelete(array,key){var index=assocIndexOf(array,key)
if(0>index)return!1
var lastIndex=array.length-1
return index==lastIndex?array.pop():splice.call(array,index,1),!0}function assocGet(array,key){var index=assocIndexOf(array,key)
return 0>index?void 0:array[index][1]}function assocHas(array,key){return assocIndexOf(array,key)>-1}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length
return-1}function assocSet(array,key,value){var index=assocIndexOf(array,key)
0>index?array.push([key,value]):array[index][1]=value}function eq(value,other){return value===other||value!==value&&other!==other}var MapCache=require("lodash._mapcache"),LARGE_ARRAY_SIZE=200,arrayProto=Array.prototype,splice=arrayProto.splice
Stack.prototype.clear=stackClear,Stack.prototype["delete"]=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet,module.exports=Stack},{"lodash._mapcache":18}],18:[function(require,module,exports){function isHostObject(value){var result=!1
if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}function Hash(){}function hashDelete(hash,key){return hashHas(hash,key)&&delete hash[key]}function hashGet(hash,key){if(nativeCreate){var result=hash[key]
return result===HASH_UNDEFINED?void 0:result}return hasOwnProperty.call(hash,key)?hash[key]:void 0}function hashHas(hash,key){return nativeCreate?void 0!==hash[key]:hasOwnProperty.call(hash,key)}function hashSet(hash,key,value){hash[key]=nativeCreate&&void 0===value?HASH_UNDEFINED:value}function MapCache(values){var index=-1,length=values?values.length:0
for(this.clear();++index<length;){var entry=values[index]
this.set(entry[0],entry[1])}}function mapClear(){this.__data__={hash:new Hash,map:Map?new Map:[],string:new Hash}}function mapDelete(key){var data=this.__data__
return isKeyable(key)?hashDelete("string"==typeof key?data.string:data.hash,key):Map?data.map["delete"](key):assocDelete(data.map,key)}function mapGet(key){var data=this.__data__
return isKeyable(key)?hashGet("string"==typeof key?data.string:data.hash,key):Map?data.map.get(key):assocGet(data.map,key)}function mapHas(key){var data=this.__data__
return isKeyable(key)?hashHas("string"==typeof key?data.string:data.hash,key):Map?data.map.has(key):assocHas(data.map,key)}function mapSet(key,value){var data=this.__data__
return isKeyable(key)?hashSet("string"==typeof key?data.string:data.hash,key,value):Map?data.map.set(key,value):assocSet(data.map,key,value),this}function assocDelete(array,key){var index=assocIndexOf(array,key)
if(0>index)return!1
var lastIndex=array.length-1
return index==lastIndex?array.pop():splice.call(array,index,1),!0}function assocGet(array,key){var index=assocIndexOf(array,key)
return 0>index?void 0:array[index][1]}function assocHas(array,key){return assocIndexOf(array,key)>-1}function assocIndexOf(array,key){for(var length=array.length;length--;)if(eq(array[length][0],key))return length
return-1}function assocSet(array,key,value){var index=assocIndexOf(array,key)
0>index?array.push([key,value]):array[index][1]=value}function getNative(object,key){var value=null==object?void 0:object[key]
return isNative(value)?value:void 0}function isKeyable(value){var type=typeof value
return"number"==type||"boolean"==type||"string"==type&&"__proto__"!==value||null==value}function eq(value,other){return value===other||value!==value&&other!==other}function isFunction(value){var tag=isObject(value)?objectToString.call(value):""
return tag==funcTag||tag==genTag}function isObject(value){var type=typeof value
return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isNative(value){return null==value?!1:isFunction(value)?reIsNative.test(funcToString.call(value)):isObjectLike(value)&&(isHostObject(value)?reIsNative:reIsHostCtor).test(value)}var root=require("lodash._root"),HASH_UNDEFINED="__lodash_hash_undefined__",funcTag="[object Function]",genTag="[object GeneratorFunction]",reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,arrayProto=Array.prototype,objectProto=Object.prototype,funcToString=Function.prototype.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),splice=arrayProto.splice,Map=getNative(root,"Map"),nativeCreate=getNative(Object,"create")
Hash.prototype=nativeCreate?nativeCreate(null):objectProto,MapCache.prototype.clear=mapClear,MapCache.prototype["delete"]=mapDelete,MapCache.prototype.get=mapGet,MapCache.prototype.has=mapHas,MapCache.prototype.set=mapSet,module.exports=MapCache},{"lodash._root":23}],19:[function(require,module,exports){arguments[4][2][0].apply(exports,arguments)},{dup:2}],20:[function(require,module,exports){function baseIsMatch(object,source,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer
if(null==object)return!length
for(object=Object(object);index--;){var data=matchData[index]
if(noCustomizer&&data[2]?data[1]!==object[data[0]]:!(data[0]in object))return!1}for(;++index<length;){data=matchData[index]
var key=data[0],objValue=object[key],srcValue=data[1]
if(noCustomizer&&data[2]){if(void 0===objValue&&!(key in object))return!1}else{var stack=new Stack,result=customizer?customizer(objValue,srcValue,key,object,source,stack):void 0
if(!(void 0===result?baseIsEqual(srcValue,objValue,customizer,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG,stack):result))return!1}}return!0}var Stack=require("lodash._stack"),baseIsEqual=require("lodash._baseisequal"),UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2
module.exports=baseIsMatch},{"lodash._baseisequal":16,"lodash._stack":21}],21:[function(require,module,exports){arguments[4][17][0].apply(exports,arguments)},{dup:17,"lodash._mapcache":22}],22:[function(require,module,exports){arguments[4][18][0].apply(exports,arguments)},{dup:18,"lodash._root":23}],23:[function(require,module,exports){arguments[4][7][0].apply(exports,arguments)},{dup:7}],24:[function(require,module,exports){function baseGet(object,path){path=isKey(path,object)?[path+""]:baseToPath(path)
for(var index=0,length=path.length;null!=object&&length>index;)object=object[path[index++]]
return index&&index==length?object:void 0}function baseToPath(value){return isArray(value)?value:stringToPath(value)}function isKey(value,object){return"number"==typeof value?!0:!isArray(value)&&(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}function stringToPath(string){var result=[]
return toString(string).replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)}),result}function isObjectLike(value){return!!value&&"object"==typeof value}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toString(value){if("string"==typeof value)return value
if(null==value)return""
if(isSymbol(value))return Symbol?symbolToString.call(value):""
var result=value+""
return"0"==result&&1/value==-INFINITY?"-0":result}function get(object,path,defaultValue){var result=null==object?void 0:baseGet(object,path)
return void 0===result?defaultValue:result}var root=require("lodash._root"),INFINITY=1/0,symbolTag="[object Symbol]",reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,reEscapeChar=/\\(\\)?/g,objectProto=Object.prototype,objectToString=objectProto.toString,Symbol=root.Symbol,symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=Symbol?symbolProto.toString:void 0,isArray=Array.isArray
module.exports=get},{"lodash._root":23}],25:[function(require,module,exports){function isIndex(value,length){return value="number"==typeof value||reIsUint.test(value)?+value:-1,length=null==length?MAX_SAFE_INTEGER:length,value>-1&&value%1==0&&length>value}function baseHasIn(object,key){return key in Object(object)}function baseProperty(key){return function(object){return null==object?void 0:object[key]}}function baseToPath(value){return isArray(value)?value:stringToPath(value)}function hasPath(object,path,hasFunc){if(null==object)return!1
var result=hasFunc(object,path)
result||isKey(path)||(path=baseToPath(path),object=parent(object,path),null!=object&&(path=last(path),result=hasFunc(object,path)))
var length=object?object.length:void 0
return result||!!length&&isLength(length)&&isIndex(path,length)&&(isArray(object)||isString(object)||isArguments(object))}function isKey(value,object){return"number"==typeof value?!0:!isArray(value)&&(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}function parent(object,path){return 1==path.length?object:get(object,baseSlice(path,0,-1))}function stringToPath(string){var result=[]
return toString(string).replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)}),result}function last(array){var length=array?array.length:0
return length?array[length-1]:void 0}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}function isArrayLike(value){return null!=value&&!("function"==typeof value&&isFunction(value))&&isLength(getLength(value))}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isFunction(value){var tag=isObject(value)?objectToString.call(value):""
return tag==funcTag||tag==genTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&MAX_SAFE_INTEGER>=value}function isObject(value){var type=typeof value
return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isString(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&objectToString.call(value)==stringTag}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toString(value){if("string"==typeof value)return value
if(null==value)return""
if(isSymbol(value))return Symbol?symbolToString.call(value):""
var result=value+""
return"0"==result&&1/value==-INFINITY?"-0":result}function hasIn(object,path){return hasPath(object,path,baseHasIn)}var baseSlice=require("lodash._baseslice"),get=require("lodash.get"),root=require("lodash._root"),INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",stringTag="[object String]",symbolTag="[object Symbol]",reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,reEscapeChar=/\\(\\)?/g,reIsUint=/^(?:0|[1-9]\d*)$/,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,Symbol=root.Symbol,propertyIsEnumerable=objectProto.propertyIsEnumerable,symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=Symbol?symbolProto.toString:void 0,getLength=baseProperty("length"),isArray=Array.isArray
module.exports=hasIn},{"lodash._baseslice":26,"lodash._root":23,"lodash.get":24}],26:[function(require,module,exports){function baseSlice(array,start,end){var index=-1,length=array.length
0>start&&(start=-start>length?0:length+start),end=end>length?length:end,0>end&&(end+=length),length=start>end?0:end-start>>>0,start>>>=0
for(var result=Array(length);++index<length;)result[index]=array[index+start]
return result}module.exports=baseSlice},{}],27:[function(require,module,exports){function baseToPairs(object,props){return arrayMap(props,function(key){return[key,object[key]]})}function toPairs(object){return baseToPairs(object,keys(object))}var arrayMap=require("lodash._arraymap"),keys=require("lodash.keys")
module.exports=toPairs},{"lodash._arraymap":28,"lodash.keys":29}],28:[function(require,module,exports){function arrayMap(array,iteratee){for(var index=-1,length=array.length,result=Array(length);++index<length;)result[index]=iteratee(array[index],index,array)
return result}module.exports=arrayMap},{}],29:[function(require,module,exports){arguments[4][2][0].apply(exports,arguments)},{dup:2}],30:[function(require,module,exports){function toFunction(value){return"function"==typeof value?value:identity}function forEach(collection,iteratee){return"function"==typeof iteratee&&isArray(collection)?arrayEach(collection,iteratee):baseEach(collection,toFunction(iteratee))}function identity(value){return value}var arrayEach=require("lodash._arrayeach"),baseEach=require("lodash._baseeach"),isArray=Array.isArray
module.exports=forEach},{"lodash._arrayeach":31,"lodash._baseeach":32}],31:[function(require,module,exports){function arrayEach(array,iteratee){for(var index=-1,length=array.length;++index<length&&iteratee(array[index],index,array)!==!1;);return array}module.exports=arrayEach},{}],32:[function(require,module,exports){arguments[4][14][0].apply(exports,arguments)},{dup:14,"lodash.keys":33}],33:[function(require,module,exports){arguments[4][2][0].apply(exports,arguments)},{dup:2}],34:[function(require,module,exports){function toFunction(value){return"function"==typeof value?value:identity}function forIn(object,iteratee){return null==object?object:baseFor(object,toFunction(iteratee),keysIn)}function identity(value){return value}var baseFor=require("lodash._basefor"),keysIn=require("lodash.keysin")
module.exports=forIn},{"lodash._basefor":35,"lodash.keysin":36}],35:[function(require,module,exports){function createBaseFor(fromRight){return function(object,iteratee,keysFunc){for(var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;length--;){var key=props[fromRight?length:++index]
if(iteratee(iterable[key],key,iterable)===!1)break}return object}}var baseFor=createBaseFor()
module.exports=baseFor},{}],36:[function(require,module,exports){arguments[4][6][0].apply(exports,arguments)},{dup:6,"lodash._root":37}],37:[function(require,module,exports){arguments[4][7][0].apply(exports,arguments)},{dup:7}],38:[function(require,module,exports){function baseProperty(key){return function(object){return null==object?void 0:object[key]}}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}function isArrayLike(value){return null!=value&&!("function"==typeof value&&isFunction(value))&&isLength(getLength(value))}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isEmpty(value){if(isArrayLike(value)&&(isArray(value)||isString(value)||isFunction(value.splice)||isArguments(value)))return!value.length
for(var key in value)if(hasOwnProperty.call(value,key))return!1
return!0}function isFunction(value){var tag=isObject(value)?objectToString.call(value):""
return tag==funcTag||tag==genTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&MAX_SAFE_INTEGER>=value}function isObject(value){var type=typeof value
return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isString(value){return"string"==typeof value||!isArray(value)&&isObjectLike(value)&&objectToString.call(value)==stringTag}var MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",stringTag="[object String]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,propertyIsEnumerable=objectProto.propertyIsEnumerable,getLength=baseProperty("length"),isArray=Array.isArray
module.exports=isEmpty},{}],39:[function(require,module,exports){function isHostObject(value){var result=!1
if(null!=value&&"function"!=typeof value.toString)try{result=!!(value+"")}catch(e){}return result}function isObjectLike(value){return!!value&&"object"==typeof value}function isPlainObject(value){if(!isObjectLike(value)||objectToString.call(value)!=objectTag||isHostObject(value))return!1
var proto=objectProto
if("function"==typeof value.constructor&&(proto=getPrototypeOf(value)),null===proto)return!0
var Ctor=proto.constructor
return"function"==typeof Ctor&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}var objectTag="[object Object]",objectProto=Object.prototype,funcToString=Function.prototype.toString,objectCtorString=funcToString.call(Object),objectToString=objectProto.toString,getPrototypeOf=Object.getPrototypeOf
module.exports=isPlainObject},{}],40:[function(require,module,exports){function arrayReduce(array,iteratee,accumulator,initAccum){var index=-1,length=array.length
for(initAccum&&length&&(accumulator=array[++index]);++index<length;)accumulator=iteratee(accumulator,array[index],index,array)
return accumulator}function baseUnary(func){return function(value){return func(value)}}function baseDifference(array,values,iteratee,comparator){var index=-1,includes=arrayIncludes,isCommon=!0,length=array.length,result=[],valuesLength=values.length
if(!length)return result
iteratee&&(values=arrayMap(values,baseUnary(iteratee))),comparator?(includes=arrayIncludesWith,isCommon=!1):values.length>=LARGE_ARRAY_SIZE&&(includes=cacheHas,isCommon=!1,values=new SetCache(values))
outer:for(;++index<length;){var value=array[index],computed=iteratee?iteratee(value):value
if(isCommon&&computed===computed){for(var valuesIndex=valuesLength;valuesIndex--;)if(values[valuesIndex]===computed)continue outer
result.push(value)}else includes(values,computed,comparator)||result.push(value)}return result}function basePick(object,props){return object=Object(object),arrayReduce(props,function(result,key){return key in object&&(result[key]=object[key]),result},{})}var SetCache=require("lodash._setcache"),arrayIncludes=require("lodash._arrayincludes"),arrayIncludesWith=require("lodash._arrayincludeswith"),arrayMap=require("lodash._arraymap"),baseFlatten=require("lodash._baseflatten"),cacheHas=require("lodash._cachehas"),keysIn=require("lodash.keysin"),rest=require("lodash.rest"),LARGE_ARRAY_SIZE=200,omit=rest(function(object,props){return null==object?{}:(props=arrayMap(baseFlatten(props),String),basePick(object,baseDifference(keysIn(object),props)))})
module.exports=omit},{"lodash._arrayincludes":41,"lodash._arrayincludeswith":42,"lodash._arraymap":43,"lodash._baseflatten":44,"lodash._cachehas":45,"lodash._setcache":46,"lodash.keysin":49,"lodash.rest":51}],41:[function(require,module,exports){function arrayIncludes(array,value){return!!array.length&&baseIndexOf(array,value,0)>-1}function baseIndexOf(array,value,fromIndex){if(value!==value)return indexOfNaN(array,fromIndex)
for(var index=fromIndex-1,length=array.length;++index<length;)if(array[index]===value)return index
return-1}function indexOfNaN(array,fromIndex,fromRight){for(var length=array.length,index=fromIndex+(fromRight?0:-1);fromRight?index--:++index<length;){var other=array[index]
if(other!==other)return index}return-1}module.exports=arrayIncludes},{}],42:[function(require,module,exports){function arrayIncludesWith(array,value,comparator){for(var index=-1,length=array.length;++index<length;)if(comparator(value,array[index]))return!0
return!1}module.exports=arrayIncludesWith},{}],43:[function(require,module,exports){arguments[4][28][0].apply(exports,arguments)},{dup:28}],44:[function(require,module,exports){function arrayPush(array,values){for(var index=-1,length=values.length,offset=array.length;++index<length;)array[offset+index]=values[index]
return array}function baseFlatten(array,isDeep,isStrict,result){result||(result=[])
for(var index=-1,length=array.length;++index<length;){var value=array[index]
isArrayLikeObject(value)&&(isStrict||isArray(value)||isArguments(value))?isDeep?baseFlatten(value,isDeep,isStrict,result):arrayPush(result,value):isStrict||(result[result.length]=value)}return result}function baseProperty(key){return function(object){return null==object?void 0:object[key]}}function isArguments(value){return isArrayLikeObject(value)&&hasOwnProperty.call(value,"callee")&&(!propertyIsEnumerable.call(value,"callee")||objectToString.call(value)==argsTag)}function isArrayLike(value){return null!=value&&!("function"==typeof value&&isFunction(value))&&isLength(getLength(value))}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}function isFunction(value){var tag=isObject(value)?objectToString.call(value):""
return tag==funcTag||tag==genTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&MAX_SAFE_INTEGER>=value}function isObject(value){var type=typeof value
return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}var MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,propertyIsEnumerable=objectProto.propertyIsEnumerable,getLength=baseProperty("length"),isArray=Array.isArray
module.exports=baseFlatten},{}],45:[function(require,module,exports){function cacheHas(cache,value){var map=cache.__data__
if(isKeyable(value)){var data=map.__data__,hash="string"==typeof value?data.string:data.hash
return hash[value]===HASH_UNDEFINED}return map.has(value)}function isKeyable(value){var type=typeof value
return"number"==type||"boolean"==type||"string"==type&&"__proto__"!==value||null==value}var HASH_UNDEFINED="__lodash_hash_undefined__"
module.exports=cacheHas},{}],46:[function(require,module,exports){function SetCache(values){var index=-1,length=values?values.length:0
for(this.__data__=new MapCache;++index<length;)this.push(values[index])}function cachePush(value){var map=this.__data__
if(isKeyable(value)){var data=map.__data__,hash="string"==typeof value?data.string:data.hash
hash[value]=HASH_UNDEFINED}else map.set(value,HASH_UNDEFINED)}function isKeyable(value){var type=typeof value
return"number"==type||"boolean"==type||"string"==type&&"__proto__"!==value||null==value}var MapCache=require("lodash._mapcache"),HASH_UNDEFINED="__lodash_hash_undefined__"
SetCache.prototype.push=cachePush,module.exports=SetCache},{"lodash._mapcache":47}],47:[function(require,module,exports){arguments[4][18][0].apply(exports,arguments)},{dup:18,"lodash._root":48}],48:[function(require,module,exports){arguments[4][7][0].apply(exports,arguments)},{dup:7}],49:[function(require,module,exports){arguments[4][6][0].apply(exports,arguments)},{dup:6,"lodash._root":50}],50:[function(require,module,exports){arguments[4][7][0].apply(exports,arguments)},{dup:7}],51:[function(require,module,exports){arguments[4][3][0].apply(exports,arguments)},{dup:3}],52:[function(require,module,exports){function arraySome(array,predicate){for(var index=-1,length=array.length;++index<length;)if(predicate(array[index],index,array))return!0
return!1}function isIndex(value,length){return value="number"==typeof value||reIsUint.test(value)?+value:-1,length=null==length?MAX_SAFE_INTEGER:length,value>-1&&value%1==0&&length>value}function baseGet(object,path){path=isKey(path,object)?[path+""]:baseToPath(path)
for(var index=0,length=path.length;null!=object&&length>index;)object=object[path[index++]]
return index&&index==length?object:void 0}function baseIteratee(value){var type=typeof value
return"function"==type?value:null==value?identity:"object"==type?isArray(value)?baseMatchesProperty(value[0],value[1]):baseMatches(value):property(value)}function baseMatches(source){var matchData=getMatchData(source)
if(1==matchData.length&&matchData[0][2]){var key=matchData[0][0],value=matchData[0][1]
return function(object){return null==object?!1:object[key]===value&&(void 0!==value||key in Object(object))}}return function(object){return object===source||baseIsMatch(object,source,matchData)}}function baseMatchesProperty(path,srcValue){return function(object){var objValue=get(object,path)
return void 0===objValue&&objValue===srcValue?hasIn(object,path):baseIsEqual(srcValue,objValue,void 0,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG)}}function baseProperty(key){return function(object){return null==object?void 0:object[key]}}function basePropertyDeep(path){return function(object){return baseGet(object,path)}}function baseSome(collection,predicate){var result
return baseEach(collection,function(value,index,collection){return result=predicate(value,index,collection),!result}),!!result}function baseToPath(value){return isArray(value)?value:stringToPath(value)}function getMatchData(object){for(var result=toPairs(object),length=result.length;length--;)result[length][2]=isStrictComparable(result[length][1])
return result}function isIterateeCall(value,index,object){if(!isObject(object))return!1
var type=typeof index
return("number"==type?isArrayLike(object)&&isIndex(index,object.length):"string"==type&&index in object)?eq(object[index],value):!1}function isKey(value,object){return"number"==typeof value?!0:!isArray(value)&&(reIsPlainProp.test(value)||!reIsDeepProp.test(value)||null!=object&&value in Object(object))}function isStrictComparable(value){return value===value&&!isObject(value)}function stringToPath(string){var result=[]
return toString(string).replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)}),result}function some(collection,predicate,guard){var func=isArray(collection)?arraySome:baseSome
return guard&&isIterateeCall(collection,predicate,guard)&&(predicate=void 0),func(collection,baseIteratee(predicate,3))}function eq(value,other){return value===other||value!==value&&other!==other}function isArrayLike(value){return null!=value&&!("function"==typeof value&&isFunction(value))&&isLength(getLength(value))}function isFunction(value){var tag=isObject(value)?objectToString.call(value):""
return tag==funcTag||tag==genTag}function isLength(value){return"number"==typeof value&&value>-1&&value%1==0&&MAX_SAFE_INTEGER>=value}function isObject(value){var type=typeof value
return!!value&&("object"==type||"function"==type)}function isObjectLike(value){return!!value&&"object"==typeof value}function isSymbol(value){return"symbol"==typeof value||isObjectLike(value)&&objectToString.call(value)==symbolTag}function toString(value){if("string"==typeof value)return value
if(null==value)return""
if(isSymbol(value))return Symbol?symbolToString.call(value):""
var result=value+""
return"0"==result&&1/value==-INFINITY?"-0":result}function identity(value){return value}function property(path){return isKey(path)?baseProperty(path):basePropertyDeep(path)}var baseEach=require("lodash._baseeach"),baseIsEqual=require("lodash._baseisequal"),baseIsMatch=require("lodash._baseismatch"),get=require("lodash.get"),hasIn=require("lodash.hasin"),root=require("lodash._root"),toPairs=require("lodash.topairs"),UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2,INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,funcTag="[object Function]",genTag="[object GeneratorFunction]",symbolTag="[object Symbol]",reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,reEscapeChar=/\\(\\)?/g,reIsUint=/^(?:0|[1-9]\d*)$/,objectProto=Object.prototype,objectToString=objectProto.toString,Symbol=root.Symbol,symbolProto=Symbol?Symbol.prototype:void 0,symbolToString=Symbol?symbolProto.toString:void 0,getLength=baseProperty("length"),isArray=Array.isArray
module.exports=some},{"lodash._baseeach":53,"lodash._baseisequal":55,"lodash._baseismatch":59,"lodash._root":62,"lodash.get":63,"lodash.hasin":64,"lodash.topairs":66}],53:[function(require,module,exports){arguments[4][14][0].apply(exports,arguments)},{dup:14,"lodash.keys":54}],54:[function(require,module,exports){arguments[4][2][0].apply(exports,arguments)},{dup:2}],55:[function(require,module,exports){arguments[4][16][0].apply(exports,arguments)},{dup:16,"lodash._root":62,"lodash._stack":56,"lodash.keys":58}],56:[function(require,module,exports){arguments[4][17][0].apply(exports,arguments)},{dup:17,"lodash._mapcache":57}],57:[function(require,module,exports){arguments[4][18][0].apply(exports,arguments)},{dup:18,"lodash._root":62}],58:[function(require,module,exports){arguments[4][2][0].apply(exports,arguments)},{dup:2}],59:[function(require,module,exports){arguments[4][20][0].apply(exports,arguments)},{dup:20,"lodash._baseisequal":55,"lodash._stack":60}],60:[function(require,module,exports){arguments[4][17][0].apply(exports,arguments)},{dup:17,"lodash._mapcache":61}],61:[function(require,module,exports){arguments[4][18][0].apply(exports,arguments)},{dup:18,"lodash._root":62}],62:[function(require,module,exports){arguments[4][7][0].apply(exports,arguments)},{dup:7}],63:[function(require,module,exports){arguments[4][24][0].apply(exports,arguments)},{dup:24,"lodash._root":62}],64:[function(require,module,exports){arguments[4][25][0].apply(exports,arguments)},{dup:25,"lodash._baseslice":65,"lodash._root":62,"lodash.get":63}],65:[function(require,module,exports){arguments[4][26][0].apply(exports,arguments)},{dup:26}],66:[function(require,module,exports){arguments[4][27][0].apply(exports,arguments)},{dup:27,"lodash._arraymap":67,"lodash.keys":68}],67:[function(require,module,exports){arguments[4][28][0].apply(exports,arguments)},{dup:28}],68:[function(require,module,exports){arguments[4][2][0].apply(exports,arguments)},{dup:2}],69:[function(require,module,exports){function createMixpanel(mixpanel,windowShim){function dom_loaded_handler(){dom_loaded_handler.done||(dom_loaded_handler.done=!0,DOM_LOADED=!0,ENQUEUE_REQUESTS=!1,_.each(instances,function(inst){inst._dom_loaded()}))}function do_scroll_check(){try{document.documentElement.doScroll("left")}catch(e){return void setTimeout(do_scroll_check,1)}dom_loaded_handler()}var ArrayProto=Array.prototype,ObjProto=Object.prototype,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,windowConsole=window.console,navigator=window.navigator,document=window.document,userAgent=navigator.userAgent,PRIMARY_INSTANCE_NAME="mixpanel",SET_QUEUE_KEY="__mps",SET_ONCE_QUEUE_KEY="__mpso",ADD_QUEUE_KEY="__mpa",APPEND_QUEUE_KEY="__mpap",SET_ACTION="$set",SET_ONCE_ACTION="$set_once",ADD_ACTION="$add",APPEND_ACTION="$append",PEOPLE_DISTINCT_ID_KEY="$people_distinct_id",ALIAS_ID_KEY="__alias",RESERVED_PROPERTIES=[SET_QUEUE_KEY,SET_ONCE_QUEUE_KEY,ADD_QUEUE_KEY,APPEND_QUEUE_KEY,PEOPLE_DISTINCT_ID_KEY,ALIAS_ID_KEY],HTTP_PROTOCOL="https:"==document.location.protocol?"https://":"http://",SNIPPET_VERSION=mixpanel&&mixpanel.__SV||0,USE_XHR=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,ENQUEUE_REQUESTS=!USE_XHR&&-1==userAgent.indexOf("MSIE"),_={},DEBUG=!1,DEFAULT_CONFIG={api_host:HTTP_PROTOCOL+"api.mixpanel.com",cross_subdomain_cookie:!0,cookie_name:"",loaded:function(){},store_google:!0,save_referrer:!0,test:!1,verbose:!1,img:!1,track_pageview:!0,debug:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_cookie:!1,secure_cookie:!1,ip:!0},DOM_LOADED=!1
!function(){var nativeForEach=ArrayProto.forEach,nativeIndexOf=ArrayProto.indexOf,nativeIsArray=Array.isArray,breaker={},each=_.each=function(obj,iterator,context){if(null!=obj)if(nativeForEach&&obj.forEach===nativeForEach)obj.forEach(iterator,context)
else if(obj.length===+obj.length){for(var i=0,l=obj.length;l>i;i++)if(i in obj&&iterator.call(context,obj[i],i,obj)===breaker)return}else for(var key in obj)if(hasOwnProperty.call(obj,key)&&iterator.call(context,obj[key],key,obj)===breaker)return}
_.extend=function(obj){return each(slice.call(arguments,1),function(source){for(var prop in source)void 0!==source[prop]&&(obj[prop]=source[prop])}),obj},_.isArray=nativeIsArray||function(obj){return"[object Array]"===toString.call(obj)},_.isFunction=function(f){try{return/^\s*\bfunction\b/.test(f)}catch(x){return!1}},_.isArguments=function(obj){return!(!obj||!hasOwnProperty.call(obj,"callee"))},_.toArray=function(iterable){return iterable?iterable.toArray?iterable.toArray():_.isArray(iterable)?slice.call(iterable):_.isArguments(iterable)?slice.call(iterable):_.values(iterable):[]},_.values=function(obj){var results=[]
return null==obj?results:(each(obj,function(value){results[results.length]=value}),results)},_.identity=function(value){return value},_.include=function(obj,target){var found=!1
return null==obj?found:nativeIndexOf&&obj.indexOf===nativeIndexOf?-1!=obj.indexOf(target):(each(obj,function(value){return found||(found=value===target)?breaker:void 0}),found)},_.includes=function(str,needle){return-1!==str.indexOf(needle)}}(),_.inherit=function(subclass,superclass){return subclass.prototype=new superclass,subclass.prototype.constructor=subclass,subclass.superclass=superclass.prototype,subclass},_.isObject=function(obj){return obj===Object(obj)&&!_.isArray(obj)},_.isEmptyObject=function(obj){if(_.isObject(obj)){for(var key in obj)if(hasOwnProperty.call(obj,key))return!1
return!0}return!1},_.isUndefined=function(obj){return void 0===obj},_.isString=function(obj){return"[object String]"==toString.call(obj)},_.isDate=function(obj){return"[object Date]"==toString.call(obj)},_.isNumber=function(obj){return"[object Number]"==toString.call(obj)},_.encodeDates=function(obj){return _.each(obj,function(v,k){_.isDate(v)?obj[k]=_.formatDate(v):_.isObject(v)&&(obj[k]=_.encodeDates(v))}),obj},_.formatDate=function(d){function pad(n){return 10>n?"0"+n:n}return d.getUTCFullYear()+"-"+pad(d.getUTCMonth()+1)+"-"+pad(d.getUTCDate())+"T"+pad(d.getUTCHours())+":"+pad(d.getUTCMinutes())+":"+pad(d.getUTCSeconds())},_.strip_empty_properties=function(p){var ret={}
return _.each(p,function(v,k){_.isString(v)&&v.length>0&&(ret[k]=v)}),ret},_.truncate=function(obj,length){var ret
return"string"==typeof obj?ret=obj.slice(0,length):_.isArray(obj)?(ret=[],_.each(obj,function(val){ret.push(_.truncate(val,length))})):_.isObject(obj)?(ret={},_.each(obj,function(val,key){ret[key]=_.truncate(val,length)})):ret=obj,ret},_.JSONEncode=function(){return function(mixed_val){var value=mixed_val,quote=function(string){var escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"}
return escapable.lastIndex=0,escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a]
return"string"==typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'},str=function(key,holder){var gap="",indent="    ",i=0,k="",v="",length=0,mind=gap,partial=[],value=holder[key]
switch(value&&"object"==typeof value&&"function"==typeof value.toJSON&&(value=value.toJSON(key)),typeof value){case"string":return quote(value)
case"number":return isFinite(value)?String(value):"null"
case"boolean":case"null":return String(value)
case"object":if(!value)return"null"
if(gap+=indent,partial=[],"[object Array]"===toString.apply(value)){for(length=value.length,i=0;length>i;i+=1)partial[i]=str(i,value)||"null"
return v=0===partial.length?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]",gap=mind,v}for(k in value)hasOwnProperty.call(value,k)&&(v=str(k,value),v&&partial.push(quote(k)+(gap?": ":":")+v))
return v=0===partial.length?"{}":gap?"{"+partial.join(",")+mind+"}":"{"+partial.join(",")+"}",gap=mind,v}}
return str("",{"":value})}}(),_.JSONDecode=function(){var at,ch,text,value,escapee={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},error=function(m){throw{name:"SyntaxError",message:m,at:at,text:text}},next=function(c){return c&&c!==ch&&error("Expected '"+c+"' instead of '"+ch+"'"),ch=text.charAt(at),at+=1,ch},number=function(){var number,string=""
for("-"===ch&&(string="-",next("-"));ch>="0"&&"9">=ch;)string+=ch,next()
if("."===ch)for(string+=".";next()&&ch>="0"&&"9">=ch;)string+=ch
if("e"===ch||"E"===ch)for(string+=ch,next(),("-"===ch||"+"===ch)&&(string+=ch,next());ch>="0"&&"9">=ch;)string+=ch,next()
return number=+string,isFinite(number)?number:void error("Bad number")},string=function(){var hex,i,uffff,string=""
if('"'===ch)for(;next();){if('"'===ch)return next(),string
if("\\"===ch)if(next(),"u"===ch){for(uffff=0,i=0;4>i&&(hex=parseInt(next(),16),isFinite(hex));i+=1)uffff=16*uffff+hex
string+=String.fromCharCode(uffff)}else{if("string"!=typeof escapee[ch])break
string+=escapee[ch]}else string+=ch}error("Bad string")},white=function(){for(;ch&&" ">=ch;)next()},word=function(){switch(ch){case"t":return next("t"),next("r"),next("u"),next("e"),!0
case"f":return next("f"),next("a"),next("l"),next("s"),next("e"),!1
case"n":return next("n"),next("u"),next("l"),next("l"),null}error("Unexpected '"+ch+"'")},array=function(){var array=[]
if("["===ch){if(next("["),white(),"]"===ch)return next("]"),array
for(;ch;){if(array.push(value()),white(),"]"===ch)return next("]"),array
next(","),white()}}error("Bad array")},object=function(){var key,object={}
if("{"===ch){if(next("{"),white(),"}"===ch)return next("}"),object
for(;ch;){if(key=string(),white(),next(":"),Object.hasOwnProperty.call(object,key)&&error('Duplicate key "'+key+'"'),object[key]=value(),white(),"}"===ch)return next("}"),object
next(","),white()}}error("Bad object")}
return value=function(){switch(white(),ch){case"{":return object()
case"[":return array()
case'"':return string()
case"-":return number()
default:return ch>="0"&&"9">=ch?number():word()}},function(source){var result
return text=source,at=0,ch=" ",result=value(),white(),ch&&error("Syntax error"),result}}(),_.base64Encode=function(data){var o1,o2,o3,h1,h2,h3,h4,bits,b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=0,ac=0,enc="",tmp_arr=[]
if(!data)return data
data=_.utf8Encode(data)
do o1=data.charCodeAt(i++),o2=data.charCodeAt(i++),o3=data.charCodeAt(i++),bits=o1<<16|o2<<8|o3,h1=bits>>18&63,h2=bits>>12&63,h3=bits>>6&63,h4=63&bits,tmp_arr[ac++]=b64.charAt(h1)+b64.charAt(h2)+b64.charAt(h3)+b64.charAt(h4)
while(i<data.length)
switch(enc=tmp_arr.join(""),data.length%3){case 1:enc=enc.slice(0,-2)+"=="
break
case 2:enc=enc.slice(0,-1)+"="}return enc},_.utf8Encode=function(string){string=(string+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")
var start,end,n,utftext="",stringl=0
for(start=end=0,stringl=string.length,n=0;stringl>n;n++){var c1=string.charCodeAt(n),enc=null
128>c1?end++:enc=c1>127&&2048>c1?String.fromCharCode(c1>>6|192,63&c1|128):String.fromCharCode(c1>>12|224,c1>>6&63|128,63&c1|128),null!==enc&&(end>start&&(utftext+=string.substring(start,end)),utftext+=enc,start=end=n+1)}return end>start&&(utftext+=string.substring(start,string.length)),utftext},_.UUID=function(){var T=function(){for(var d=1*new Date,i=0;d==1*new Date;)i++
return d.toString(16)+i.toString(16)},R=function(){return Math.random().toString(16).replace(".","")},UA=function(n){function xor(result,byte_array){var j,tmp=0
for(j=0;j<byte_array.length;j++)tmp|=buffer[j]<<8*j
return result^tmp}var i,ch,ua=userAgent,buffer=[],ret=0
for(i=0;i<ua.length;i++)ch=ua.charCodeAt(i),buffer.unshift(255&ch),buffer.length>=4&&(ret=xor(ret,buffer),buffer=[])
return buffer.length>0&&(ret=xor(ret,buffer)),ret.toString(16)}
return function(){var se=(screen.height*screen.width).toString(16)
return T()+"-"+R()+"-"+UA()+"-"+se+"-"+T()}}(),_.isBlockedUA=function(){var a=userAgent
return/(google web preview|baiduspider|yandexbot)/i.test(a)?!0:!1},_.HTTPBuildQuery=function(formdata,arg_separator){var use_val,use_key,tmp_arr=[]
return"undefined"==typeof arg_separator&&(arg_separator="&"),_.each(formdata,function(val,key){use_val=encodeURIComponent(val.toString()),use_key=encodeURIComponent(key),tmp_arr[tmp_arr.length]=use_key+"="+use_val}),tmp_arr.join(arg_separator)},_.getQueryParam=function(url,param){param=param.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]")
var regexS="[\\?&]"+param+"=([^&#]*)",regex=new RegExp(regexS),results=regex.exec(url)
return null===results||results&&"string"!=typeof results[1]&&results[1].length?"":decodeURIComponent(results[1]).replace(/\+/g," ")},_.cookie={get:function(name){for(var nameEQ=name+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1,c.length)
if(0==c.indexOf(nameEQ))return decodeURIComponent(c.substring(nameEQ.length,c.length))}return null},parse:function(name){var cookie
try{cookie=_.JSONDecode(_.cookie.get(name))||{}}catch(err){}return cookie},set:function(name,value,days,cross_subdomain,is_secure){var cdomain="",expires="",secure=""
if(cross_subdomain){var matches=document.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),domain=matches?matches[0]:""
cdomain=domain?"; domain=."+domain:""}if(days){var date=new Date
date.setTime(date.getTime()+24*days*60*60*1e3),expires="; expires="+date.toGMTString()}is_secure&&(secure="; secure"),document.cookie=name+"="+encodeURIComponent(value)+expires+"; path=/"+cdomain+secure},remove:function(name,cross_subdomain){_.cookie.set(name,"",-1,cross_subdomain)}},_.register_event=function(){function makeHandler(element,new_handler,old_handlers){var handler=function(event){if(event=event||fixEvent(window.event),!event)return void 0
var old_result,new_result,ret=!0
return _.isFunction(old_handlers)&&(old_result=old_handlers(event)),new_result=new_handler.call(element,event),(!1===old_result||!1===new_result)&&(ret=!1),ret}
return handler}function fixEvent(event){return event&&(event.preventDefault=fixEvent.preventDefault,event.stopPropagation=fixEvent.stopPropagation),event}var register_event=function(element,type,handler,oldSchool){if(!element)return void console.error("No valid element provided to register_event")
if(element.addEventListener&&!oldSchool)element.addEventListener(type,handler,!1)
else{var ontype="on"+type,old_handler=element[ontype]
element[ontype]=makeHandler(element,handler,old_handler)}}
return fixEvent.preventDefault=function(){this.returnValue=!1},fixEvent.stopPropagation=function(){this.cancelBubble=!0},register_event}(),_.dom_query=function(){function getAllChildren(e){return e.all?e.all:e.getElementsByTagName("*")}function hasClass(elem,selector){var className=" "+selector+" "
return(" "+elem.className+" ").replace(bad_whitespace," ").indexOf(className)>=0}function getElementsBySelector(selector){if(!document.getElementsByTagName)return new Array
for(var token,tokens=selector.split(" "),currentContext=new Array(document),i=0;i<tokens.length;i++)if(token=tokens[i].replace(/^\s+/,"").replace(/\s+$/,""),token.indexOf("#")>-1){var bits=token.split("#"),tagName=bits[0],id=bits[1],element=document.getElementById(id)
if(!element||tagName&&element.nodeName.toLowerCase()!=tagName)return new Array
currentContext=new Array(element)}else if(token.indexOf(".")>-1){var bits=token.split("."),tagName=bits[0],className=bits[1]
tagName||(tagName="*")
for(var found=new Array,foundCount=0,h=0;h<currentContext.length;h++){var elements
elements="*"==tagName?getAllChildren(currentContext[h]):currentContext[h].getElementsByTagName(tagName)
for(var j=0;j<elements.length;j++)found[foundCount++]=elements[j]}currentContext=new Array
for(var currentContextIndex=0,k=0;k<found.length;k++)found[k].className&&_.isString(found[k].className)&&hasClass(found[k],className)&&(currentContext[currentContextIndex++]=found[k])}else if(token.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/)){var tagName=RegExp.$1,attrName=RegExp.$2,attrOperator=RegExp.$3,attrValue=RegExp.$4
tagName||(tagName="*")
for(var found=new Array,foundCount=0,h=0;h<currentContext.length;h++){var elements
elements="*"==tagName?getAllChildren(currentContext[h]):currentContext[h].getElementsByTagName(tagName)
for(var j=0;j<elements.length;j++)found[foundCount++]=elements[j]}currentContext=new Array
var checkFunction,currentContextIndex=0
switch(attrOperator){case"=":checkFunction=function(e){return e.getAttribute(attrName)==attrValue}
break
case"~":checkFunction=function(e){return e.getAttribute(attrName).match(new RegExp("\\b"+attrValue+"\\b"))}
break
case"|":checkFunction=function(e){return e.getAttribute(attrName).match(new RegExp("^"+attrValue+"-?"))}
break
case"^":checkFunction=function(e){return 0==e.getAttribute(attrName).indexOf(attrValue)}
break
case"$":checkFunction=function(e){return e.getAttribute(attrName).lastIndexOf(attrValue)==e.getAttribute(attrName).length-attrValue.length}
break
case"*":checkFunction=function(e){return e.getAttribute(attrName).indexOf(attrValue)>-1}
break
default:checkFunction=function(e){return e.getAttribute(attrName)}}currentContext=new Array,currentContextIndex=0
for(var k=0;k<found.length;k++)checkFunction(found[k])&&(currentContext[currentContextIndex++]=found[k])}else{tagName=token
for(var found=new Array,foundCount=0,h=0;h<currentContext.length;h++)for(var elements=currentContext[h].getElementsByTagName(tagName),j=0;j<elements.length;j++)found[foundCount++]=elements[j]
currentContext=found}return currentContext}var bad_whitespace=/[\t\r\n]/g
return getElementsBySelector}(),_.info={campaignParams:function(){var campaign_keywords="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),kw="",params={}
return _.each(campaign_keywords,function(kwkey){kw=_.getQueryParam(document.URL,kwkey),kw.length&&(params[kwkey]=kw)}),params},searchEngine:function(referrer){return 0===referrer.search("https?://(.*)google.([^/?]*)")?"google":0===referrer.search("https?://(.*)bing.com")?"bing":0===referrer.search("https?://(.*)yahoo.com")?"yahoo":0===referrer.search("https?://(.*)duckduckgo.com")?"duckduckgo":null},searchInfo:function(referrer){var search=_.info.searchEngine(referrer),param="yahoo"!=search?"q":"p",ret={}
if(null!==search){ret.$search_engine=search
var keyword=_.getQueryParam(referrer,param)
keyword.length&&(ret.mp_keyword=keyword)}return ret},browser:function(user_agent,vendor,opera){var vendor=vendor||""
return opera?_.includes(user_agent,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(user_agent)?"BlackBerry":_.includes(user_agent,"FBIOS")?"Facebook Mobile":_.includes(user_agent,"Chrome")?"Chrome":_.includes(user_agent,"CriOS")?"Chrome iOS":_.includes(vendor,"Apple")?_.includes(user_agent,"Mobile")?"Mobile Safari":"Safari":_.includes(user_agent,"Android")?"Android Mobile":_.includes(user_agent,"Konqueror")?"Konqueror":_.includes(user_agent,"Firefox")?"Firefox":_.includes(user_agent,"MSIE")||_.includes(user_agent,"Trident/")?"Internet Explorer":_.includes(user_agent,"Gecko")?"Mozilla":""},os:function(){var a=userAgent
return/Windows/i.test(a)?/Phone/.test(a)?"Windows Mobile":"Windows":/(iPhone|iPad|iPod)/.test(a)?"iOS":/Android/.test(a)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(a)?"BlackBerry":/Mac/i.test(a)?"Mac OS X":/Linux/.test(a)?"Linux":""},device:function(user_agent){return/iPad/.test(user_agent)?"iPad":/iPod/.test(user_agent)?"iPod Touch":/iPhone/.test(user_agent)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(user_agent)?"BlackBerry":/Windows Phone/i.test(user_agent)?"Windows Phone":/Android/.test(user_agent)?"Android":""},referringDomain:function(referrer){var split=referrer.split("/")
return split.length>=3?split[2]:""},properties:function(){return _.strip_empty_properties({$os:_.info.os(),$browser:_.info.browser(userAgent,navigator.vendor,window.opera),$referrer:document.referrer,$referring_domain:_.info.referringDomain(document.referrer),$device:_.info.device(userAgent),mp_lib:"web"})},people_properties:function(){return _.strip_empty_properties({$os:_.info.os(),$browser:_.info.browser(userAgent,navigator.vendor,window.opera)})},pageviewInfo:function(page){return _.strip_empty_properties({mp_page:page,mp_referrer:document.referrer,mp_browser:_.info.browser(userAgent,navigator.vendor,window.opera),mp_platform:_.info.os()})}}
var console={log:function(){if(DEBUG&&!_.isUndefined(windowConsole)&&windowConsole)try{windowConsole.log.apply(windowConsole,arguments)}catch(err){_.each(arguments,function(arg){windowConsole.log(arg)})}},error:function(){if(DEBUG&&!_.isUndefined(windowConsole)&&windowConsole){var args=["Mixpanel error:"].concat(_.toArray(arguments))
try{windowConsole.error.apply(windowConsole,args)}catch(err){_.each(args,function(arg){windowConsole.error(arg)})}}},critical:function(){if(!_.isUndefined(windowConsole)&&windowConsole){var args=["Mixpanel error:"].concat(_.toArray(arguments))
try{windowConsole.error.apply(windowConsole,args)}catch(err){_.each(args,function(arg){windowConsole.error(arg)})}}}},DomTracker=function(){}
DomTracker.prototype.create_properties=function(){},DomTracker.prototype.event_handler=function(){},DomTracker.prototype.after_track_handler=function(){},DomTracker.prototype.init=function(mixpanel_instance){return this.mp=mixpanel_instance,this},DomTracker.prototype.track=function(query,event_name,properties,user_callback){var that=this,elements=_.dom_query(query)
return 0==elements.length?void console.error("The DOM query ("+query+") returned 0 elements"):(_.each(elements,function(element){_.register_event(element,this.override_event,function(e){var options={},props=that.create_properties(properties,this),timeout=that.mp.get_config("track_links_timeout")
that.event_handler(e,this,options),window.setTimeout(that.track_callback(user_callback,props,options,!0),timeout),that.mp.track(event_name,props,that.track_callback(user_callback,props,options))})},this),!0)},DomTracker.prototype.track_callback=function(user_callback,props,options,timeout_occured){timeout_occured=timeout_occured||!1
var that=this
return function(){options.callback_fired||(options.callback_fired=!0,user_callback&&user_callback(timeout_occured,props)===!1||that.after_track_handler(props,options,timeout_occured))}},DomTracker.prototype.create_properties=function(properties,element){var props
return props="function"==typeof properties?properties(element):_.extend({},properties)}
var LinkTracker=function(){this.override_event="click"}
_.inherit(LinkTracker,DomTracker),LinkTracker.prototype.create_properties=function(properties,element){var props=LinkTracker.superclass.create_properties.apply(this,arguments)
return element.href&&(props.url=element.href),props},LinkTracker.prototype.event_handler=function(evt,element,options){options.new_tab=2===evt.which||evt.metaKey||"_blank"===element.target,options.href=element.href,options.new_tab||evt.preventDefault()},LinkTracker.prototype.after_track_handler=function(props,options,timeout_occured){options.new_tab||setTimeout(function(){window.location=options.href},0)}
var FormTracker=function(){this.override_event="submit"}
_.inherit(FormTracker,DomTracker),FormTracker.prototype.event_handler=function(evt,element,options){options.element=element,evt.preventDefault()},FormTracker.prototype.after_track_handler=function(props,options,timeout_occured){setTimeout(function(){options.element.submit()},0)}
var MixpanelCookie=function(config){this.props={},this.campaign_params_saved=!1,config.cookie_name?this.name="mp_"+config.cookie_name:this.name="mp_"+config.token+"_mixpanel",this.load(),this.update_config(config),this.upgrade(config),this.save()}
MixpanelCookie.prototype.properties=function(){var p={}
return _.each(this.props,function(v,k){_.include(RESERVED_PROPERTIES,k)||(p[k]=v)}),p},MixpanelCookie.prototype.load=function(){if(!this.disabled){var cookie=_.cookie.parse(this.name)
cookie&&(this.props=_.extend({},cookie))}},MixpanelCookie.prototype.upgrade=function(config){var old_cookie_name,old_cookie,should_upgrade=config.upgrade
should_upgrade&&(old_cookie_name="mp_super_properties","string"==typeof should_upgrade&&(old_cookie_name=should_upgrade),old_cookie=_.cookie.parse(old_cookie_name),_.cookie.remove(old_cookie_name),_.cookie.remove(old_cookie_name,!0),old_cookie&&(this.props=_.extend(this.props,old_cookie.all,old_cookie.events))),config.cookie_name||"mixpanel"===config.name||(old_cookie_name="mp_"+config.token+"_"+config.name,old_cookie=_.cookie.parse(old_cookie_name),old_cookie&&(_.cookie.remove(old_cookie_name),_.cookie.remove(old_cookie_name,!0),this.register_once(old_cookie)))},MixpanelCookie.prototype.save=function(){this.disabled||_.cookie.set(this.name,_.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure)},MixpanelCookie.prototype.remove=function(){_.cookie.remove(this.name,!1),_.cookie.remove(this.name,!0)},MixpanelCookie.prototype.clear=function(){this.remove(),this.props={}},MixpanelCookie.prototype.register_once=function(props,default_value,days){return _.isObject(props)?("undefined"==typeof default_value&&(default_value="None"),this.expire_days="undefined"==typeof days?this.default_expiry:days,_.each(props,function(val,prop){this.props[prop]&&this.props[prop]!==default_value||(this.props[prop]=val)},this),this.save(),!0):!1},MixpanelCookie.prototype.register=function(props,days){return _.isObject(props)?(this.expire_days="undefined"==typeof days?this.default_expiry:days,_.extend(this.props,props),this.save(),!0):!1},MixpanelCookie.prototype.unregister=function(prop){prop in this.props&&(delete this.props[prop],this.save())},MixpanelCookie.prototype.update_campaign_params=function(){this.campaign_params_saved||(this.register_once(_.info.campaignParams()),this.campaign_params_saved=!0)},MixpanelCookie.prototype.update_search_keyword=function(referrer){this.register(_.info.searchInfo(referrer))},MixpanelCookie.prototype.update_referrer_info=function(referrer){this.register_once({$initial_referrer:referrer||"$direct",$initial_referring_domain:_.info.referringDomain(referrer)||"$direct"},"")},MixpanelCookie.prototype.get_referrer_info=function(){return _.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})},MixpanelCookie.prototype.safe_merge=function(props){return _.each(this.props,function(val,prop){prop in props||(props[prop]=val)}),props},MixpanelCookie.prototype.update_config=function(config){this.default_expiry=this.expire_days=config.cookie_expiration,this.set_disabled(config.disable_cookie),this.set_cross_subdomain(config.cross_subdomain_cookie),this.set_secure(config.secure_cookie)},MixpanelCookie.prototype.set_disabled=function(disabled){this.disabled=disabled,this.disabled&&this.remove()},MixpanelCookie.prototype.set_cross_subdomain=function(cross_subdomain){cross_subdomain!==this.cross_subdomain&&(this.cross_subdomain=cross_subdomain,this.remove(),this.save())},MixpanelCookie.prototype.get_cross_subdomain=function(){return this.cross_subdomain},MixpanelCookie.prototype.set_secure=function(secure){secure!==this.secure&&(this.secure=secure?!0:!1,this.remove(),this.save())},MixpanelCookie.prototype._add_to_people_queue=function(queue,data){var q_key=this._get_queue_key(queue),q_data=data[queue],set_q=this._get_or_create_queue(SET_ACTION),set_once_q=this._get_or_create_queue(SET_ONCE_ACTION),add_q=this._get_or_create_queue(ADD_ACTION),append_q=this._get_or_create_queue(APPEND_ACTION,[])
q_key===SET_QUEUE_KEY?(_.extend(set_q,q_data),this._pop_from_people_queue(ADD_ACTION,q_data)):q_key===SET_ONCE_QUEUE_KEY?_.each(q_data,function(v,k){k in set_once_q||(set_once_q[k]=v)}):q_key===ADD_QUEUE_KEY?_.each(q_data,function(v,k){k in set_q?set_q[k]+=v:(k in add_q||(add_q[k]=0),add_q[k]+=v)},this):q_key===APPEND_QUEUE_KEY&&append_q.push(q_data),console.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),console.log(data),this.save()},MixpanelCookie.prototype._pop_from_people_queue=function(queue,data){var q=this._get_queue(queue)
_.isUndefined(q)||(_.each(data,function(v,k){delete q[k]},this),this.save())},MixpanelCookie.prototype._get_queue_key=function(queue){return queue===SET_ACTION?SET_QUEUE_KEY:queue===SET_ONCE_ACTION?SET_ONCE_QUEUE_KEY:queue===ADD_ACTION?ADD_QUEUE_KEY:queue===APPEND_ACTION?APPEND_QUEUE_KEY:void console.error("Invalid queue:",queue)},MixpanelCookie.prototype._get_queue=function(queue){return this.props[this._get_queue_key(queue)]},MixpanelCookie.prototype._get_or_create_queue=function(queue,default_val){var key=this._get_queue_key(queue),default_val=_.isUndefined(default_val)?{}:default_val
return this.props[key]||(this.props[key]=default_val)}
var create_mplib=function(token,config,name){var instance,target=name===PRIMARY_INSTANCE_NAME?mixpanel:mixpanel[name]
return target&&!_.isArray(target)?void console.error("You have already initialized "+name):(instance=new MixpanelLib,instance._init(token,config,name),instance.people=new MixpanelPeople,instance.people._init(instance),DEBUG=DEBUG||instance.get_config("debug"),_.isUndefined(target)||(instance._execute_array.call(instance.people,target.people),instance._execute_array(target)),instance)},MixpanelLib=function(){}
MixpanelLib.prototype.init=function(token,config,name){if("undefined"==typeof name)return void console.error("You must name your new library: init(token, config, name)")
if(name===PRIMARY_INSTANCE_NAME)return void console.error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet")
var instance=create_mplib(token,config,name)
return mixpanel[name]=instance,instance._loaded(),instance},MixpanelLib.prototype._init=function(token,config,name){this.__loaded=!0,this.config={},this.set_config(_.extend({},DEFAULT_CONFIG,config,{name:name,token:token,callback_fn:(name===PRIMARY_INSTANCE_NAME?name:PRIMARY_INSTANCE_NAME+"."+name)+"._jsc"})),this._jsc=function(){},this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.cookie=new MixpanelCookie(this.config),this.register_once({distinct_id:_.UUID()},"")},MixpanelLib.prototype._loaded=function(){this.get_config("loaded")(this),this.get_config("track_pageview")&&this.track_pageview()},MixpanelLib.prototype._dom_loaded=function(){_.each(this.__dom_loaded_queue,function(item){this._track_dom.apply(this,item)},this),_.each(this.__request_queue,function(item){this._send_request.apply(this,item)},this),delete this.__dom_loaded_queue,delete this.__request_queue},MixpanelLib.prototype._track_dom=function(DomClass,args){if(this.get_config("img"))return console.error("You can't use DOM tracking functions with img = true."),!1
if(!DOM_LOADED)return this.__dom_loaded_queue.push([DomClass,args]),!1
var dt=(new DomClass).init(this)
return dt.track.apply(dt,args)},MixpanelLib.prototype._prepare_callback=function(callback,data){if(_.isUndefined(callback))return null
if(USE_XHR){var callback_function=function(response){callback(response,data)}
return callback_function}var jsc=this._jsc,randomized_cb=""+Math.floor(1e8*Math.random()),callback_string=this.get_config("callback_fn")+'["'+randomized_cb+'"]'
return jsc[randomized_cb]=function(response){delete jsc[randomized_cb],callback(response,data)},callback_string},MixpanelLib.prototype._send_request=function(url,data,callback){if(ENQUEUE_REQUESTS)return void this.__request_queue.push(arguments)
var verbose_mode=this.get_config("verbose")
if(this.get_config("test")&&(data.test=1),verbose_mode&&(data.verbose=1),this.get_config("img")&&(data.img=1),USE_XHR||(callback?data.callback=callback:(verbose_mode||this.get_config("test"))&&(data.callback="(function(){})")),data.ip=this.get_config("ip")?1:0,data._=(new Date).getTime().toString(),url+="?"+_.HTTPBuildQuery(data),"img"in data){var img=document.createElement("img")
img.src=url,document.body.appendChild(img)}else if(USE_XHR){var req=new XMLHttpRequest
req.open("GET",url,!0),req.withCredentials=!0,req.onreadystatechange=function(e){if(4===req.readyState)if(200===req.status)callback&&callback(verbose_mode?_.JSONDecode(req.responseText):Number(req.responseText))
else{var error="Bad HTTP status: "+req.status+" "+req.statusText
console.error(error),callback&&callback(verbose_mode?{status:0,error:error}:0)}},req.send(null)}else{var script=document.createElement("script")
script.type="text/javascript",script.async=!0,script.defer=!0,script.src=url
var s=document.getElementsByTagName("script")[0]
s.parentNode.insertBefore(script,s)}},MixpanelLib.prototype._execute_array=function(array){var fn_name,alias_calls=[],other_calls=[],tracking_calls=[]
_.each(array,function(item){item&&(fn_name=item[0],"function"==typeof item?item.call(this):_.isArray(item)&&"alias"===fn_name?alias_calls.push(item):_.isArray(item)&&-1!=fn_name.indexOf("track")&&"function"==typeof this[fn_name]?tracking_calls.push(item):other_calls.push(item))},this)
var execute=function(calls,context){_.each(calls,function(item){this[item[0]].apply(this,item.slice(1))},context)}
execute(alias_calls,this),execute(other_calls,this),execute(tracking_calls,this)},MixpanelLib.prototype.push=function(item){this._execute_array([item])},MixpanelLib.prototype.disable=function(events){"undefined"==typeof events?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(events)},MixpanelLib.prototype.track=function(event_name,properties,callback){if("undefined"==typeof event_name)return void console.error("No event name provided to mixpanel.track")
if(_.isBlockedUA()||this._flags.disable_all_events||_.include(this.__disabled_events,event_name))return void("undefined"!=typeof callback&&callback(0))
properties=properties||{},properties.token=properties.token||this.get_config("token"),this.cookie.update_search_keyword(document.referrer),this.get_config("store_google")&&this.cookie.update_campaign_params(),this.get_config("save_referrer")&&this.cookie.update_referrer_info(document.referrer),properties=_.extend({},_.info.properties(),this.cookie.properties(),properties)
var data={event:event_name,properties:properties},truncated_data=_.truncate(data,255),json_data=_.JSONEncode(truncated_data),encoded_data=_.base64Encode(json_data)
return console.log("MIXPANEL REQUEST:"),console.log(truncated_data),this._send_request(this.get_config("api_host")+"/track/",{data:encoded_data},this._prepare_callback(callback,truncated_data)),truncated_data},MixpanelLib.prototype.track_pageview=function(page){"undefined"==typeof page&&(page=document.location.href),this.track("mp_page_view",_.info.pageviewInfo(page))},MixpanelLib.prototype.track_links=function(){return this._track_dom.call(this,LinkTracker,arguments)},MixpanelLib.prototype.track_forms=function(){return this._track_dom.call(this,FormTracker,arguments)},MixpanelLib.prototype.register=function(props,days){this.cookie.register(props,days)},MixpanelLib.prototype.register_once=function(props,default_value,days){this.cookie.register_once(props,default_value,days)},MixpanelLib.prototype.unregister=function(property){this.cookie.unregister(property)},MixpanelLib.prototype._register_single=function(prop,value){var props={}
props[prop]=value,this.register(props)},MixpanelLib.prototype.identify=function(unique_id,_set_callback,_add_callback,_append_callback,_set_once_callback){unique_id!=this.get_distinct_id()&&unique_id!=this.get_property(ALIAS_ID_KEY)&&(this.unregister(ALIAS_ID_KEY),this._register_single("distinct_id",unique_id)),this._flags.identify_called=!0,this.people._flush(_set_callback,_add_callback,_append_callback,_set_once_callback)},MixpanelLib.prototype.get_distinct_id=function(){return this.get_property("distinct_id")},MixpanelLib.prototype.alias=function(alias,original){if(alias===this.get_property(PEOPLE_DISTINCT_ID_KEY))return console.critical("Attempting to create alias for existing People user - aborting."),-2
var _this=this
return _.isUndefined(original)&&(original=this.get_distinct_id()),alias!==original?(this._register_single(ALIAS_ID_KEY,alias),this.track("$create_alias",{alias:alias,distinct_id:original},function(response){_this.identify(alias)})):(console.error("alias matches current distinct_id - skipping api call."),this.identify(alias),-1)},MixpanelLib.prototype.name_tag=function(name_tag){this._register_single("mp_name_tag",name_tag)},MixpanelLib.prototype.set_config=function(config){_.isObject(config)&&(_.extend(this.config,config),this.cookie&&this.cookie.update_config(this.config),DEBUG=DEBUG||this.get_config("debug"))},MixpanelLib.prototype.get_config=function(prop_name){return this.config[prop_name]},MixpanelLib.prototype.get_property=function(property_name){return this.cookie.props[property_name]},MixpanelLib.prototype.toString=function(){var name=this.get_config("name")
return name!==PRIMARY_INSTANCE_NAME&&(name=PRIMARY_INSTANCE_NAME+"."+name),name}
var MixpanelPeople=function(){}
if(MixpanelPeople.prototype._init=function(mixpanel){this._mixpanel=mixpanel},MixpanelPeople.prototype.set=function(prop,to,callback){var data={},$set={}
return _.isObject(prop)?(_.each(prop,function(v,k){"$distinct_id"!=k&&"$token"!=k&&($set[k]=v)}),callback=to):$set[prop]=to,this._get_config("save_referrer")&&this._mixpanel.cookie.update_referrer_info(document.referrer),$set=_.extend({},_.info.people_properties(),this._mixpanel.cookie.get_referrer_info(),$set),data[SET_ACTION]=$set,this._send_request(data,callback)},MixpanelPeople.prototype.set_once=function(prop,to,callback){var data={},$set_once={}
return _.isObject(prop)?(_.each(prop,function(v,k){"$distinct_id"!=k&&"$token"!=k&&($set_once[k]=v)}),callback=to):$set_once[prop]=to,data[SET_ONCE_ACTION]=$set_once,this._send_request(data,callback)},MixpanelPeople.prototype.increment=function(prop,by,callback){var data={},$add={}
return _.isObject(prop)?(_.each(prop,function(v,k){return"$distinct_id"!=k&&"$token"!=k?isNaN(parseFloat(v))?void console.error("Invalid increment value passed to mixpanel.people.increment - must be a number"):void($add[k]=v):void 0}),callback=by):(_.isUndefined(by)&&(by=1),$add[prop]=by),data[ADD_ACTION]=$add,this._send_request(data,callback)},MixpanelPeople.prototype.append=function(list_name,value,callback){var data={},$append={}
return _.isObject(list_name)?(_.each(list_name,function(v,k){"$distinct_id"!=k&&"$token"!=k&&($append[k]=v)}),callback=value):$append[list_name]=value,data[APPEND_ACTION]=$append,this._send_request(data,callback)},MixpanelPeople.prototype.track_charge=function(amount,properties,callback){return!_.isNumber(amount)&&(amount=parseFloat(amount),isNaN(amount))?void console.error("Invalid value passed to mixpanel.people.track_charge - must be a number"):this.append("$transactions",_.extend({$amount:amount},properties),callback)},MixpanelPeople.prototype.clear_charges=function(callback){return this.set("$transactions",[],callback)},MixpanelPeople.prototype.delete_user=function(){if(!this._identify_called())return void console.error("mixpanel.people.delete_user() requires you to call identify() first")
var data={$delete:this._mixpanel.get_distinct_id()}
return this._send_request(data)},MixpanelPeople.prototype.toString=function(){return this._mixpanel.toString()+".people"},MixpanelPeople.prototype._send_request=function(data,callback){data.$token=this._get_config("token"),data.$distinct_id=this._mixpanel.get_distinct_id()
var date_encoded_data=_.encodeDates(data),truncated_data=_.truncate(date_encoded_data,255),json_data=_.JSONEncode(date_encoded_data),encoded_data=_.base64Encode(json_data)
return this._identify_called()?(console.log("MIXPANEL PEOPLE REQUEST:"),console.log(truncated_data),this._mixpanel._send_request(this._get_config("api_host")+"/engage/",{data:encoded_data},this._mixpanel._prepare_callback(callback,truncated_data)),truncated_data):(this._enqueue(data),_.isUndefined(callback)||callback(this._get_config("verbose")?{status:-1,error:null}:-1),truncated_data)},MixpanelPeople.prototype._get_config=function(conf_var){return this._mixpanel.get_config(conf_var)},MixpanelPeople.prototype._identify_called=function(){return this._mixpanel._flags.identify_called===!0},MixpanelPeople.prototype._enqueue=function(data){SET_ACTION in data?this._mixpanel.cookie._add_to_people_queue(SET_ACTION,data):SET_ONCE_ACTION in data?this._mixpanel.cookie._add_to_people_queue(SET_ONCE_ACTION,data):ADD_ACTION in data?this._mixpanel.cookie._add_to_people_queue(ADD_ACTION,data):APPEND_ACTION in data?this._mixpanel.cookie._add_to_people_queue(APPEND_ACTION,data):console.error("Invalid call to _enqueue():",data)},MixpanelPeople.prototype._flush=function(_set_callback,_add_callback,_append_callback,_set_once_callback){var _this=this,$set_queue=_.extend({},this._mixpanel.cookie._get_queue(SET_ACTION)),$set_once_queue=_.extend({},this._mixpanel.cookie._get_queue(SET_ONCE_ACTION)),$add_queue=_.extend({},this._mixpanel.cookie._get_queue(ADD_ACTION)),$append_queue=this._mixpanel.cookie._get_queue(APPEND_ACTION)
if(_.isUndefined($set_queue)||!_.isObject($set_queue)||_.isEmptyObject($set_queue)||(_this._mixpanel.cookie._pop_from_people_queue(SET_ACTION,$set_queue),this.set($set_queue,function(response,data){0==response&&_this._mixpanel.cookie._add_to_people_queue(SET_ACTION,$set_queue),_.isUndefined(_set_callback)||_set_callback(response,data)})),_.isUndefined($set_once_queue)||!_.isObject($set_once_queue)||_.isEmptyObject($set_once_queue)||(_this._mixpanel.cookie._pop_from_people_queue(SET_ONCE_ACTION,$set_once_queue),this.set_once($set_once_queue,function(response,data){0==response&&_this._mixpanel.cookie._add_to_people_queue(SET_ONCE_ACTION,$set_once_queue),_.isUndefined(_set_once_callback)||_set_once_callback(response,data)})),_.isUndefined($add_queue)||!_.isObject($add_queue)||_.isEmptyObject($add_queue)||(_this._mixpanel.cookie._pop_from_people_queue(ADD_ACTION,$add_queue),this.increment($add_queue,function(response,data){0==response&&_this._mixpanel.cookie._add_to_people_queue(ADD_ACTION,$add_queue),_.isUndefined(_add_callback)||_add_callback(response,data)})),!_.isUndefined($append_queue)&&_.isArray($append_queue)&&$append_queue.length){for(var i=$append_queue.length-1;i>=0;i--){var $append_item=$append_queue.pop()
_this.append($append_item,function(response,data){0==response&&_this._mixpanel.cookie._add_to_people_queue(APPEND_ACTION,$append_item),_.isUndefined(_append_callback)||_append_callback(response,data)})}_this._mixpanel.cookie.save()}},_.toArray=_.toArray,_.isObject=_.isObject,_.JSONEncode=_.JSONEncode,_.JSONDecode=_.JSONDecode,_.isEmptyObject=_.isEmptyObject,_.info=_.info,_.info.device=_.info.device,_.info.browser=_.info.browser,MixpanelLib.prototype.init=MixpanelLib.prototype.init,MixpanelLib.prototype.disable=MixpanelLib.prototype.disable,MixpanelLib.prototype.track=MixpanelLib.prototype.track,MixpanelLib.prototype.track_links=MixpanelLib.prototype.track_links,MixpanelLib.prototype.track_forms=MixpanelLib.prototype.track_forms,MixpanelLib.prototype.track_pageview=MixpanelLib.prototype.track_pageview,MixpanelLib.prototype.register=MixpanelLib.prototype.register,MixpanelLib.prototype.register_once=MixpanelLib.prototype.register_once,MixpanelLib.prototype.unregister=MixpanelLib.prototype.unregister,MixpanelLib.prototype.identify=MixpanelLib.prototype.identify,MixpanelLib.prototype.alias=MixpanelLib.prototype.alias,MixpanelLib.prototype.name_tag=MixpanelLib.prototype.name_tag,MixpanelLib.prototype.set_config=MixpanelLib.prototype.set_config,MixpanelLib.prototype.get_config=MixpanelLib.prototype.get_config,MixpanelLib.prototype.get_property=MixpanelLib.prototype.get_property,MixpanelLib.prototype.get_distinct_id=MixpanelLib.prototype.get_distinct_id,MixpanelLib.prototype.toString=MixpanelLib.prototype.toString,MixpanelCookie.prototype.properties=MixpanelCookie.prototype.properties,MixpanelCookie.prototype.update_search_keyword=MixpanelCookie.prototype.update_search_keyword,MixpanelCookie.prototype.update_referrer_info=MixpanelCookie.prototype.update_referrer_info,MixpanelCookie.prototype.get_cross_subdomain=MixpanelCookie.prototype.get_cross_subdomain,MixpanelCookie.prototype.clear=MixpanelCookie.prototype.clear,MixpanelPeople.prototype.set=MixpanelPeople.prototype.set,MixpanelPeople.prototype.set_once=MixpanelPeople.prototype.set_once,MixpanelPeople.prototype.increment=MixpanelPeople.prototype.increment,MixpanelPeople.prototype.append=MixpanelPeople.prototype.append,MixpanelPeople.prototype.track_charge=MixpanelPeople.prototype.track_charge,MixpanelPeople.prototype.clear_charges=MixpanelPeople.prototype.clear_charges,MixpanelPeople.prototype.delete_user=MixpanelPeople.prototype.delete_user,MixpanelPeople.prototype.toString=MixpanelPeople.prototype.toString,_.isUndefined(mixpanel))return void console.critical("'mixpanel' object not initialized. Ensure you are using the latest version of the Mixpanel JS Library along with the snippet we provide.")
if(mixpanel.__loaded||mixpanel.config&&mixpanel.cookie)return void console.error("Mixpanel library has already been downloaded at least once.")
if(1.1>SNIPPET_VERSION)return void console.critical("Version mismatch; please ensure you're using the latest version of the Mixpanel code snippet.")
var instances={}
_.each(mixpanel._i,function(item){var name,instance
item&&_.isArray(item)&&(name=item[item.length-1],instance=create_mplib.apply(this,item),instances[name]=instance)})
var extend_mp=function(){_.each(instances,function(instance,name){name!==PRIMARY_INSTANCE_NAME&&(mixpanel[name]=instance)}),mixpanel._=_}
if(mixpanel.init=function(token,config,name){if(name)mixpanel[name]||(mixpanel[name]=instances[name]=create_mplib(token,config,name),mixpanel[name]._loaded())
else{var instance=mixpanel
instances[PRIMARY_INSTANCE_NAME]?instance=instances[PRIMARY_INSTANCE_NAME]:token&&(instance=create_mplib(token,config,PRIMARY_INSTANCE_NAME)),windowShim[PRIMARY_INSTANCE_NAME]=mixpanel=instance,extend_mp()}},mixpanel.init(),_.each(instances,function(instance){instance._loaded()}),document.addEventListener)"complete"==document.readyState?dom_loaded_handler():document.addEventListener("DOMContentLoaded",dom_loaded_handler,!1)
else if(document.attachEvent){document.attachEvent("onreadystatechange",dom_loaded_handler)
var toplevel=!1
try{toplevel=null==window.frameElement}catch(e){}document.documentElement.doScroll&&toplevel&&do_scroll_check()}_.register_event(window,"load",dom_loaded_handler,!0)}module.exports=function(token){var mixpanelShim=[],windowShim={}
return mixpanelShim.__SV=1.2,createMixpanel(mixpanelShim,windowShim),windowShim.mixpanel.init(token),windowShim.mixpanel}},{}],70:[function(require,module,exports){var Env=require("../../environment"),defaultLiveTrackingCode="UA-13200995-3",defaultNonLiveTrackingCode="UA-13200995-10",timesHigherEdTrackingCode="UA-35881683-1",uniRankingPortalTrackingCode="UA-60406435-1",jobsTimesHigerEdTrackingCode="UA-35881683-1",timesHigherEdWebtempTrackingCode="UA-35881683-4",tesForTeachersTrackingCode="UA-13200995-11",testTesForTeachersTrackingCode="UA-13200995-12",conf={envTokenMap:{local:defaultNonLiveTrackingCode,development:defaultNonLiveTrackingCode,staging:defaultNonLiveTrackingCode,live:defaultLiveTrackingCode},domainTokenMap:{"www.tes.co.uk":defaultLiveTrackingCode,"www.tes.com":defaultLiveTrackingCode,"www.tes-stage.com":defaultNonLiveTrackingCode,"secure.timeshighereducation.com":timesHigherEdTrackingCode,"www.timeshighereducation.com":timesHigherEdTrackingCode,"uni-ranking-portal.staging.tescloud.com":uniRankingPortalTrackingCode,"jobs.timeshighereducation.com":jobsTimesHigerEdTrackingCode,"timeshighereducation-webtemp.madgexjb.com":timesHigherEdWebtempTrackingCode,"www.tesforteachers.com":tesForTeachersTrackingCode,"stage-www.tesforteachers.com":testTesForTeachersTrackingCode,"dev-www.tesforteachers.com":testTesForTeachersTrackingCode,"local.tesforteachers.com":testTesForTeachersTrackingCode},specialCaseTokenMap:{},activeDomains:["localhost","development.tescloud.com","staging.tescloud.com","www.tes.co.uk","www.tes.com","www.tes-stage.com","www.timeshighereducation.com","secure.timeshighereducation.com","news.tes.co.uk","www.tesforteachers.com","local.tesforteachers.com","jobs.timeshighereducation.com","timeshighereducation-webtemp.madgexjb.com","community.tes.com"],fallbackToken:defaultNonLiveTrackingCode}
module.exports=function(window){return new Env(window,conf)}},{"../../environment":78}],71:[function(require,module,exports){module.exports=function(i,s,o,g,r,a,m){i.GoogleAnalyticsObject=r,i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date,a=s.createElement(o),m=s.getElementsByTagName(o)[0],a.async=1,a.src=g,m.parentNode.insertBefore(a,m)}},{}],72:[function(require,module,exports){var gaWrapper=require("./ga"),GaEnv=require("./environment")
module.exports=function(mz,w,d){function pageViewHandler(eventType,data,next){var location=w.location.href
data.page.customDimensions&&w.ga("set","dimension"+data.page.customDimensions[0].dimensionIndex,data.page.customDimensions[0].dimensionValue),w.ga("set","dimension4",data.page.type),w.ga("set","dimension5",data.page.section)
var properties={location:location,page:w.location.pathname,hitCallback:next}
w.ga("send","pageview",properties)}var gaEnv=new GaEnv(w)
if(gaEnv.isActive()){var trackingCode=gaEnv.getTrackingCode()
gaWrapper(w,d,"script","//www.google-analytics.com/analytics.js","ga"),w.ga("create",trackingCode,"auto"),mz.addListener(mz.events.PAGE_VIEW,pageViewHandler,this)}}},{"./environment":70,"./ga":71}],73:[function(require,module,exports){module.exports=function(mz){function logEventHandler(eventType,data,next){mz.log("%c MZ ","background: #222; color: #bada55","["+mz.environment+"]: "+eventType,data)
var logLocal=mz.logLocalOrVersion()
logLocal&&mz.log("%c MZ ","background: #222; color: #55daba",logLocal),mz.sendMessage({type:"log",environment:mz.environment,event:eventType,data:data}),next()}for(var eventType in mz.events)mz.events.hasOwnProperty(eventType)&&mz.addListener(mz.events[eventType],logEventHandler,this)}},{}],74:[function(require,module,exports){var env=require("../../environment"),liveToken="fd3d5759a07726972d68c6ec82d49b2c",stagingToken="1303172ac98418bfd05dd43496ec3580",nonLiveToken="1ae92b53f973b38b26d42d84564f00dc",conf={envTokenMap:{local:nonLiveToken,development:nonLiveToken,staging:stagingToken,live:liveToken},activeDomains:["localhost","www.tes.co.uk","www.tes.com","www.tesforteachers.com"],specialCaseTokenMap:{},fallbackToken:nonLiveToken}
module.exports=function(window){return new env(window,conf)}},{"../../environment":78}],75:[function(require,module,exports){var MpEnv=require("./environment"),Mixpanel=require("mixpanel-commonjs"),utils=require("../../utils")
module.exports=function(mz,window){var mixpanelModule={mixpanel:{},eventHandler:function(eventType,data,next){if(!this._passesEventFilter(data))return next()
var properties=this.toMixpanelProperties(eventType,data),eventName=""
properties.eventTitle?eventName=properties.eventTitle:(eventName=eventType,window.console.log("You should really pass an eventTitle property so we can overwrite the event name in mixpanel.")),this.sendToMixpanel(eventName,properties,next)},registerProperty:function(eventType,data,next){var properties=data.event
properties&&utils.isPlainObject(properties)&&!utils.isEmpty(properties)&&this.registerWithMixpanel(properties),next()},_passesEventFilter:function(eventData){return eventData&&eventData.event&&eventData.event.tags&&eventData.event.tags.indexOf("funnel")>=0},sendToMixpanel:function(eventName,properties,next){return this.mixpanel?void this.mixpanel.track(eventName,properties,next):next()},registerWithMixpanel:function(properties){this.mixpanel.register(properties)},toMixpanelProperties:function(eventType,data){var properties={event:eventType,referrer:document.referrer,campaignId:utils.getQueryParameterByName(document.location,"utm_campaign")||utils.getQueryParameterByName(document.location,"cid")||""}
return utils.assign(properties,this._flatten(data.page,"page"),this._flatten(data.user,"user"),this._flatten(data.event)),properties},_flatten:function(data,prefix){if(!utils.isPlainObject(data)){var ret={}
return ret[prefix]=data,ret}var self=this,flattened={}
return utils.forEach(data,function(value,key){prefix&&(key=prefix+key.charAt(0).toUpperCase()+key.substr(1)),utils.assign(flattened,self._flatten(value,key))}),flattened}},mpEnv=new MpEnv(window)
return mpEnv.isActive()&&(mixpanelModule.mixpanel=new Mixpanel(mpEnv.getTrackingCode()),utils.forEach(utils.omit(mz.events,"REGISTER_PROPERTY"),function(e){mz.addListener(e,mixpanelModule.eventHandler,mixpanelModule)}),mz.addListener(mz.events.REGISTER_PROPERTY,mixpanelModule.registerProperty,mixpanelModule)),mixpanelModule}},{"../../utils":83,"./environment":74,"mixpanel-commonjs":69}],76:[function(require,module,exports){var utils=require("../../utils"),queue=[]
module.exports=function(mz,s){function sendEvent(event,next){if(!validateEvent(event))return mz.log("You have not provided sufficient information for the event-tracking service, it must have an event and asset.type.")
var sendSingleEvent=function(){var request=new mz.window.XMLHttpRequest
request.open("POST",mz.endpoint,!0),request.onreadystatechange=function(){4===request.readyState&&(queue[0].callback&&queue[0].callback(),queue.shift(),queue.length>0&&setTimeout(sendSingleEvent,0))},request.withCredentials=!0,request.setRequestHeader("Content-Type","application/json; charset=UTF-8"),request.send(queue[0].event)}
queue.push({event:JSON.stringify(event),callback:next}),1===queue.length&&setTimeout(sendSingleEvent,0)}function validateEvent(event){return event.event&&event.asset&&event.asset.type}function toEtEvent(eventType,data){var cid=utils.getQueryParameterByName(document.location,"utm_campaign")||utils.getQueryParameterByName(document.location,"cid")||""
return{event:eventType,asset:{type:data.page.type,id:data.page.id,authorId:data.page.authorId},userId:data.user.id,referrer:data.event.documentReferrer||document.referrer||"",url:window.location.href,cid:cid,page:data.page,user:data.user,screen:screenData,eventData:data.event}}function pageViewHandler(eventType,data,next){sendEvent(toEtEvent(eventType,data),next)}function downloadHandler(eventType,data,next){var cid=utils.getQueryParameterByName(document.location,"utm_campaign")||utils.getQueryParameterByName(document.location,"cid")||"",downloadData={event:eventType,asset:{type:downloadAssetTypeMap[data.event.downloadType]||data.event.downloadType,id:data.page.id},userId:data.user.id,referrer:data.event.documentReferrer||document.referrer||"",url:window.location.href,cid:cid,page:data.page,user:data.user,screen:screenData,eventData:data.event}
sendEvent(downloadData,next)}function registerHandler(eventType,data,next){var cid=utils.getQueryParameterByName(document.location,"utm_campaign")||utils.getQueryParameterByName(document.location,"cid")||"",registerData={event:eventType,asset:{type:"user"},referrer:data.event.documentReferrer||document.referrer||"",url:window.location.href,cid:cid,page:data.page,user:data.user,screen:screenData,eventData:data.event}
sendEvent(registerData,next)}function clickHandler(eventType,data,next){var cid=utils.getQueryParameterByName(document.location,"utm_campaign")||utils.getQueryParameterByName(document.location,"cid")||"",clickData={event:eventType,asset:{type:data.event.assetType||data.page.type,id:data.event.id||data.page.id},referrer:window.location.href,url:window.location.href,page:data.page,cid:cid,user:data.user,screen:screenData,eventData:data.event}
sendEvent(clickData,next)}function playHandler(eventType,data,next){var cid=utils.getQueryParameterByName(document.location,"utm_campaign")||utils.getQueryParameterByName(document.location,"cid")||"",playData={event:eventType,asset:{type:data.event.assetType||data.page.type,id:data.event.id||data.page.id},userId:data.user.id,referrer:data.event.documentReferrer||document.referrer||"",url:window.location.href,page:data.page,cid:cid,user:data.user,screen:screenData,eventData:data.event}
sendEvent(playData,next)}if("object"==typeof JSON&&"function"==typeof JSON.stringify){var screenData=s?{innerWidth:mz.window.innerWidth,innerHeight:mz.window.innerHeight,width:s.width,height:s.height,availHeight:s.availHeight,availLeft:s.availLeft,availTop:s.availTop,availWidth:s.availWidth,orientation_angle:s.orientation&&s.orientation.angle,orientation_type:s.orientation&&s.orientation.type}:{},downloadAssetTypeMap={"job.attachment":"job"}
mz.addListener(mz.events.EXIT_CLICK,pageViewHandler),mz.addListener(mz.events.PAGE_VIEW,pageViewHandler),mz.addListener(mz.events.DISPLAY,pageViewHandler),mz.addListener(mz.events.ACCEPT,pageViewHandler),mz.addListener(mz.events.CLOSE,pageViewHandler),mz.addListener(mz.events.DOWNLOAD,downloadHandler),mz.addListener(mz.events.APPLY,pageViewHandler),mz.addListener(mz.events.SUBMIT,pageViewHandler),mz.addListener(mz.events.LOGIN,registerHandler),mz.addListener(mz.events.REGISTER,registerHandler),mz.addListener(mz.events.CLICK,clickHandler),mz.addListener(mz.events.PLAY,playHandler),mz.addListener(mz.events.RATING,pageViewHandler),mz.addListener(mz.events.WEBLINK,pageViewHandler),mz.addListener(mz.events.BUNDLE,pageViewHandler),mz.addListener(mz.events.REVIEW,pageViewHandler),mz.addListener(mz.events.BUY,pageViewHandler),mz.addListener(mz.events.REGISTER_PROPERTY,pageViewHandler),mz.addListener(mz.events.LOGIN_FAIL,pageViewHandler),mz.addListener(mz.events.REGISTER_FAIL,pageViewHandler),mz.addListener(mz.events.RESOURCE_PREVIEW,pageViewHandler)}}},{"../../utils":83}],77:[function(require,module,exports){function registerExitLinkHandler(mz,env){function _measureLt(event){var el=event.srcElement||event.target,isDefaultPrevented=event.defaultPrevented
if(!isDefaultPrevented){for(;el&&("undefined"==typeof el.tagName||"a"!==el.tagName.toLowerCase()||!el.href);)el=el.parentNode
if(el&&el.href&&null!==el.getAttribute("data-mz")){var link=el.href,data={},target=el.target&&!el.target.match(/^_(self|parent|top)$/i)?el.target:!1,hitBack=function(link,target){target?mz.window.open(link,target):mz.window.location.href=link};-1===el.host.indexOf(location.host)?(mz.emit(mz.events.EXIT_CLICK,{url:link}),event.preventDefault?event.preventDefault():event.returnValue=!1,setTimeout(function(){hitBack(link,target)},500)):(event.preventDefault?event.preventDefault():event.returnValue=!1,utils.traverseDOM(el,function(node){if("dataset"in node)utils.forIn(node.dataset,function(value,key){"dataset"in node&&(data[key]=value)})
else if(node.attributes)for(var att,nodes=[],values=[],i=0,atts=node.attributes,n=atts.length;n>i;i++)att=atts[i],-1!==att.nodeName.indexOf("data-")&&(nodes.push(att.nodeName),values.push(att.nodeValue),data[att.nodeName.split("-")[1]]=att.nodeValue)
return node}),"non-live"===env&&utils.forIn(data,function(value,key){console.log(key+": "+value)}),data.pagetype=w.TES.pageMetadata&&w.TES.pageMetadata.type||"",delete data.mz,utils.setCookie(mz.document,LINK_DATA_COOKIE,JSON.stringify(data),null,"/"),hitBack(link,target))}}}if("object"==typeof JSON&&"function"==typeof JSON.stringify){var LINK_DATA_COOKIE="__mz_link",w=mz.window
w.addEventListener?w.addEventListener("load",function(){mz.document.body.addEventListener("click",_measureLt,!1)},!1):w.attachEvent&&w.attachEvent("onload",function(){mz.document.body.attachEvent("onclick",_measureLt)})
var cookieData=utils.getCookie(mz.document,LINK_DATA_COOKIE),extraData={}
if(cookieData){utils.deleteCookie(mz.document,LINK_DATA_COOKIE,"/")
try{extraData={referrer:utils.omit(JSON.parse(cookieData),"reactid")}}catch(ex){}w.TES.pageMetadata=utils.assign(w.TES.pageMetadata,extraData)}}}var utils=require("./utils")
module.exports=registerExitLinkHandler},{"./utils":83}],78:[function(require,module,exports){function sussOutEnvironment(domain){var sussedOutEnv="local",keywordEnvMap={development:["dev-","-dev","development"],staging:["stage-","-stage","staging"],local:["local"]}
return utils.forEach(keywordEnvMap,function(keywords,env){var keywordMatch=utils.some(keywords,function(kw){return domain.indexOf(kw)>=0})
return keywordMatch?(sussedOutEnv=env,!1):void 0}),sussedOutEnv}function getSpecialCaseTokenKey(pathname){return pathname?pathname.split("/")[1]:null}var utils=require("./utils"),Env=function(window,conf){this.domain=window.location.hostname,this.pathname=window.location.pathname,this.conf=utils.defaults(conf,{envTokenMap:{},domainTokenMap:{},activeDomains:[],fallbackToken:null}),this.name=this._getEnvironmentName()}
Env.prototype={isActive:function(){var self=this,filtered=utils.filter(this.conf.activeDomains,function(ad){return utils.endsWith(self.domain,ad)},this)
return filtered.length>0},getTrackingCode:function(){var envName=this._getEnvironmentName(),specialTokenKey=getSpecialCaseTokenKey(this.pathname),specialTokenConfig=this.conf.specialCaseTokenMap[specialTokenKey],specialCaseTokenOverride=specialTokenConfig&&specialTokenConfig.applyToDomains.indexOf(this.domain)>=0?specialTokenConfig.tokens[envName]:"",domainTokenOverride=this.conf.domainTokenMap[this.domain],envToken=this.conf.envTokenMap[envName]
return specialCaseTokenOverride||domainTokenOverride||envToken||this.conf.fallbackToken},_getEnvironmentName:function(){var env,productionDomainList=["www.tes.co.uk","www.tes.com","account.tes.co.uk","www.sharemylesson.com","www.tesaustralia.com","www.tesindia.com","jobs.timeshighereducation.com","www.timeshighereducation.com","news.tes.co.uk","community.tes.com","www.tesforteachers.com"]
return env=productionDomainList.indexOf(this.domain)>-1?"live":sussOutEnvironment(this.domain)}},module.exports=Env},{"./utils":83}],79:[function(require,module,exports){module.exports={PAGE_VIEW:"view",EXIT_CLICK:"exit.click",DOWNLOAD:"download",APPLY:"apply",SUBMIT:"submit",LOGIN:"login",REGISTER:"register",CLICK:"click",PLAY:"play",DISPLAY:"display",CLOSE:"close",ACCEPT:"accept",RATING:"rating",WEBLINK:"weblink",BUNDLE:"bundle",REVIEW:"review",BUY:"buy",REGISTER_PROPERTY:"register_property",LOGIN_FAIL:"login-fail",REGISTER_FAIL:"register-fail",RESOURCE_PREVIEW:"resource.preview"}},{}],80:[function(require,module,exports){require("./polyfills/indexOf")
var Mz=require("./mz"),autoLinkHandler=require("./auto-links"),Env=require("./environment"),utils=require("./utils"),w=window?window:{},d=document?document:{},s=screen?screen:{},currentEnvironment=new Env(window)
w.TES=w.TES||{},w.TES.mz=new Mz(w,d,currentEnvironment.name,w.TES.pageMetadata,w.TES.userMetadata,w.TES.domain),w.TES.mz._utils=utils,w._mz=w.TES.mz,w._mze=w.TES.mz.events,autoLinkHandler(w.TES.mz,currentEnvironment),require("./adaptors/logger")(w.TES.mz,currentEnvironment),require("./adaptors/tes")(w.TES.mz,s),require("./adaptors/ga")(w.TES.mz,w,d),require("./adaptors/mixpanel")(w.TES.mz,w),w.chrome?(w._mz.sendMessage=function(message){var event=new CustomEvent("mz-event",{detail:message})
document.dispatchEvent(event)},w._mz.sendMessage({type:"status",status:"ON"})):w._mz.sendMessage=function(){},module.exports=w},{"./adaptors/ga":72,"./adaptors/logger":73,"./adaptors/mixpanel":75,"./adaptors/tes":76,"./auto-links":77,"./environment":78,"./mz":81,"./polyfills/indexOf":82,"./utils":83}],81:[function(require,module,exports){var utils=require("./utils"),Mz=function(window,document,environment,pageMetadata,userMetadata,domain){this.window=window,this.document=document,this.environment=environment,this.pageMetadata=pageMetadata,this.userMetadata=userMetadata,this.Mz_LOG_COOKIE="_mz_logger",this.Mz_LOCAL_COOKIE="mzlocal",this.Mz_VERSION_COOKIE="mzversion",this.Mz_HANDLER_TIMEOUT=500,this.endpoint=(domain||"")+"/et"}
Mz.prototype.emit=function(type,data,next){function invokeHandlers(){for(i=0,n=handlers.length;n>i;i++){handler=handlers[i]
try{handler.method.call(handler.scope,type,self.getMetadata(data),handlerCallback)}catch(err){self.log('Error: "'+err.toString()+'" thrown by: '+handler.method.name+" for event: "+type,data),handlerCallback()}}}next=next||function(){}
var listeners,handlers,i,n,handler,self=this
if(void 0===type)return self.log("WARNING! The fired event type is undefined."),next()
if(!(listeners=this.listeners))return next()
if(!(handlers=listeners[type]))return next()
var completedHandlers=0,completed=!1,timeout=!1,handlerCallback=function(){completedHandlers++,timeout||completedHandlers!==handlers.length||(completed=!0,next())},timeoutCallback=function(){completed||(timeout=!0,self.log("WARNING: Timeout while waiting for handler response, continuing ..."),next())}
setTimeout(timeoutCallback,self.Mz_HANDLER_TIMEOUT),invokeHandlers()},Mz.prototype.addListener=function(type,method,scope){var listeners,self=this
return void 0===type?void self.log("WARNING! The subscribed event type is undefined."):((listeners=this.listeners)||(listeners=this.listeners={}),scope=scope?scope:self.window,listeners[type]=listeners[type]||[],void listeners[type].push({method:method,scope:scope}))},Mz.prototype.getMetadata=function(data){var obj={page:this.pageMetadata||{},user:this.userMetadata||{},event:data||{}}
return obj},Mz.prototype.log=function(){var self=this
if(self.window.console&&self.window.console.log&&("live"!==self.environment||self.shouldLogVerbose()))try{self.window.console.log.apply(self.window.console,arguments)}catch(e){}},Mz.prototype.showLog=function(){utils.setCookie(this.document,this.Mz_LOG_COOKIE,"verbose",null,"/")},Mz.prototype.hideLog=function(){utils.deleteCookie(this.document,this.Mz_LOG_COOKIE)},Mz.prototype.useLocal=function(local){local?(utils.deleteCookie(this.document,this.Mz_VERSION_COOKIE),utils.setCookie(this.document,this.Mz_LOCAL_COOKIE,"true",null,"/")):utils.deleteCookie(this.document,this.Mz_LOCAL_COOKIE)},Mz.prototype.useVersion=function(version){version?(utils.deleteCookie(this.document,this.Mz_LOCAL_COOKIE),utils.setCookie(this.document,this.Mz_VERSION_COOKIE,version,null,"/")):utils.deleteCookie(this.document,this.Mz_VERSION_COOKIE)},Mz.prototype.logLocalOrVersion=function(){var msg="",version=utils.getCookie(this.document,this.Mz_VERSION_COOKIE)
return msg+="true"===utils.getCookie(this.document,this.Mz_LOCAL_COOKIE)?"WARN: Using LOCAL override, use _mz.useLocal() to reset":"",msg+=version?"Using VERSION "+version+" override, use _mz.useVersion() to reset":""},Mz.prototype.shouldLogVerbose=function(){return"verbose"===utils.getCookie(this.document,this.Mz_LOG_COOKIE)?!0:!1},Mz.prototype.events=require("./event-types"),module.exports=Mz},{"./event-types":79,"./utils":83}],82:[function(require,module,exports){module.exports=function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(searchElement,fromIndex){var k
if(null==this)throw new TypeError('"this" is null or not defined')
var O=Object(this),len=O.length>>>0
if(0===len)return-1
var n=+fromIndex||0
if(Math.abs(n)===1/0&&(n=0),n>=len)return-1
for(k=Math.max(n>=0?n:len-Math.abs(n),0);len>k;){if(k in O&&O[k]===searchElement)return k
k++}return-1})}()},{}],83:[function(require,module,exports){function zeroes(numZeroes){for(var rv="",i=0;numZeroes>i;i++)rv+="0"
return rv}function zeroPad(num,width){var rawNum=parseInt(num,10).toString()
return rawNum.length>=width?rawNum:zeroes(width-rawNum.length)+rawNum}function formatDate(d){return d.getFullYear()+"-"+zeroPad(d.getMonth()+1,2)+"-"+zeroPad(d.getDate(),2)}function formatHour(d){return zeroPad(d.getHours(),2)}function isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n)}function numberDefaultingToZero(value){return isNumber(value)?value:"0"}function setCookie(d,szName,szValue,szExpires,szPath,szDomain,bSecure){var szCookieText=escape(szName)+"="+escape(szValue)
szCookieText+=szExpires?";expires="+szExpires.toGMTString():"",szCookieText+=szPath?";path="+szPath:"",szCookieText+=szDomain?";domain="+szDomain:"",szCookieText+=bSecure?";secure":"",d.cookie=szCookieText}function getCookie(d,szName){var szValue=null
if(d.cookie){var arr=d.cookie.split(escape(szName)+"=")
2<=arr.length&&(szValue=unescape(arr[1].split(";")[0]),szValue.length>1&&'"'===szValue.charAt(0)&&'"'===szValue.charAt(szValue.length-1)&&(szValue=szValue.substring(1,szValue.length-1)))}return szValue}function deleteCookie(d,szName,path){var tmp=getCookie(d,szName)
tmp&&setCookie(d,szName,tmp,new Date(1),path)}function traverseDOM(node,func){for(func(node),node=node.parentNode;node&&"HTML"!==node.tagName;)node=traverseDOM(node,func)}function exists(val){return"undefined"!=typeof val&&null!==val&&""!==val?!0:!1}function getQueryParameterByName(location,name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]")
var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(location.search)
return null===results?"":decodeURIComponent(results[1].replace(/\+/g," "))}module.exports={omit:require("lodash.omit"),assign:require("lodash.assign"),forIn:require("lodash.forin"),forEach:require("lodash.foreach"),endsWith:require("lodash.endswith"),filter:require("lodash.filter"),some:require("lodash.some"),isPlainObject:require("lodash.isplainobject"),isEmpty:require("lodash.isempty"),defaults:require("lodash.defaults"),formatDate:formatDate,formatHour:formatHour,zeroPad:zeroPad,zeroes:zeroes,isNumber:isNumber,numberDefaultingToZero:numberDefaultingToZero,setCookie:setCookie,getCookie:getCookie,deleteCookie:deleteCookie,traverseDOM:traverseDOM,exists:exists,getQueryParameterByName:getQueryParameterByName}},{"lodash.assign":1,"lodash.defaults":4,"lodash.endswith":9,"lodash.filter":11,"lodash.foreach":30,"lodash.forin":34,"lodash.isempty":38,"lodash.isplainobject":39,"lodash.omit":40,"lodash.some":52}]},{},[80])

//# sourceMappingURL=mz.js.map